%% gridnets.tex 
%% 2006/05/30 
%% 
\documentclass[conference]{IEEEtran}

% correct bad hyphenation here
\hyphenation{op-tical net-works semi-conduc-tor IEEEtran}

\begin{document}

% paper title
\title{Intra and Interdomain Circuit Provisioning using the OSCARS Reservation System}

% 
\author{\authorblockN{Chin~Guok\authorrefmark{1},
David~Robertson\authorrefmark{1}\authorrefmark{2},
Mary~Thompson\authorrefmark{2} and
Jason~Lee\authorrefmark{2}}
\authorblockA{\authorrefmark{1}Energy Sciences Network\\
Berkeley, California 94720}
\authorblockA{\authorrefmark{2}Ernest Orlando Lawrence Berkeley National Laboratory\\
Berkeley, CA  94720}}

% make the title area
\maketitle

\begin{abstract}
The Energy Sciences Network (ESnet) is a high-speed network serving thousands 
of Department of Energy scientists and collaborators worldwide.
With the advent of service sensitive applications (such as remote controlled 
experiments, time constrained massive data transfers, video-conferencing, etc.),
it has become apparent that there is a need to augment the services present in
today's ESnet infrastructure.  In particular, there is a need for dynamically 
provisioned, quality of service enabled paths.

The ESnet On-Demand Secure Circuits and Advance Reservation System (OSCARS) is 
a prototype service enabling on-demand provisioning of guaranteed bandwidth 
secure circuits both within ESnet, and across network domains.

OSCARS utilizes the Web services model and standards to implement communication
with the system and between domains, and for authentication, authorization,
and auditing (AAA).  The management and operation of end-to-end circuits 
within the network is done at the layer 3 level.  Label Switched Paths 
(LSP's) are used, implemented using Multi-Protocol Label Switching (MPLS) and 
the Resource Reservation Protocol (RSVP). Quality of Service (QoS) is used to 
provide bandwidth guarantees.
\end{abstract}

% no keywords

% For peer review papers, you can put extra information on the cover
% page as needed:
% \begin{center} \bfseries EDICS Category: 3-BBND \end{center}
%
% for peerreview papers, inserts a page break and creates the second title.
% Will be ignored for other modes.
\IEEEpeerreviewmaketitle

\section{Introduction)}
ESnet is a nation wide network that serves approximately 42 directly connected 
sites around the country.  Internally, ESnet manages about 270 routers and 
systems throughout the network and its operations centers.  The current ESnet 
architecture (Figure 1) is that of a high-bandwidth (10/2.5 Gb/s) backbone ring 
around the country, with hubs at strategic locations.  The end sites are 
connected to the hubs in a spoke-like fashion, with local loops and last-mile 
tail circuits that are typically 0.6 or 2.5 Gb/s for the big science 
laboratories.  OSCARS faces the constraint of operation within this production 
network, where 99.9+ percent reliability is critical.

The goal of OSCARS is to satisfy the demands of high-impact network services, 
which are designed to move the massive amounts of data from experiments and 
simulations with multi-terabyte to multi-petabyte datasets.  Other network 
services with a major impact on science, such as high-end remote visualizations,
that cannot be provided cost-effectively by the production network are also 
candidate high-impact network services.

These services, required by a subset of production network sites, have demands 
which may be extremely high at times but for which a considerably less reliable 
and potentially schedulable service will nevertheless meet the needs.  Provision
of such services at greater than 99.9 percent reliability with the ability to 
match potential peak demands would otherwise be prohibitively expensive.

Having the ability to dynamically allocate capacity in the network exclusively 
to a scheduled service, to the exclusion of normal priority traffic, introduces 
risks.  Unintended and adverse consequences for the network that may result
have to be identified and carefully characterized, so that checks are
designed to mitigate or eliminate these risks.

At the same time, the intent of OSCARS is to create a service for dynamic QoS 
path establishment that is simple for users to use. The only task required of a
typical user is to make a bandwidth reservation. The user does not have to 
configure an alternate routing path, nor mark the packets in any way. All 
necessary mechanisms needed to provide the user with a guaranteed bandwidth 
path are coordinated by OSCARS and managed by the routers in the network.

The following sections cover how OSCARS addresses the above constraints and
risks while implementing a scheduling system.
Section II covers the architecture of OSCARS, how a typical path is set
up, and an overview of security.  Section III describes the issues encountered 
during OSCARS' implementation, including details on security considerations.  

The section on interdomain reservations covers other reservation systems and 
collaborations that have been set up with their developers, as well as 
interoperability tests that have been performed thus far.  The final section 
touches briefly on the future work that needs to be performed
to handle a dynamically changing network (which may invalidate existing
reservations), and to set up end-to-end circuits between domains
in a secure, standards-based fashion.


\section{Architecture (David)}

\subsection{overall architecture}
\subsection{use of Web services}
\subsection{individual components}

\section{Issues dealt with}
\subsection{Path Discovery}
There are two scenarios for creating a path in OSCARS.  One is where the
reservation originates within the OSCARS system.  The other is where a request
is forwarded from another reservation system, 

In the first case where the reservation originates within the OSCAR system,
OSCARS does a trace towards the source IP address of the traffic. As the trace
progress across the routers in the OSCARS system, each router it checked to make
sure that it is controlled by OSCARS. As soon as OSCARS encounters a router that
is outside of the system, OSCARS marks that router as the ingress router. After
the ingress router is located, OSCARS acts the same as if it had received a
request that contained the ingress router already (explained below).

In the second case another reservation system contacts OSCARS and asks it to
create a path from a particular ingress router towards a destination IP address.
In this case OSCARS starts at the ingress router and 'traces' a path towards the
destination address. As each router is traversed it is checked to see if it is
contained within the OSCARS system. As soon as a router is encountered in the
path that is outside of OSCARS control, that router is checked against a list of
AS (Autonomous System) numbers that OSCARS knows how to communicate with. If the
router is in that list, OSCARS will forward the request on to that system, so
that that system can continue to trace the path. If the last router does not
belong to another system that OSCARS knows how to communicate with, OSCARS marks
that that as the egress router and establishes the LSP between the ingress and
egress routers.

\subsection{Advanced Reservations (Jason)}
In OSCARS advance reservations are handled in a slot based manner. This equates
to 'fist come first served' for bandwidth across any particular link at any
moment. As each reservation is requested in OSCARS, the end-to-end path is
computed for that reservation. Once the entire path though all the routers
controlled by OSCARS has been computed then each link in the path is checked for
available bandwidth. To check the bandwidth of a link all outstanding
reservations for that link during the time of the proposed reservation are
queried from the data base. Then all the reserved bandwidth amounts are
calculated and compared to the the actual capacity of the link. If the requested
amount of bandwidth plus all outstanding reservations is more then the allocated
amount of bandwidth available for reservations on that link (usually
%50), then the reservation fails. Only if there is enough bandwidth available
on all links is the reservation committed into the reservation system.

In the case where the capacity of a link changes, all outstanding reservations
that involve the use of that link are queried from the system and recomputed.
This is done to ensure that at the time that the reservation is 'setup' there
is adequate bandwidth available on that link for the reservation.

\subsection{provisioning and policing (Chin)}
To facilitate bandwidth guarantees, provisioning and policing are needed to 
enforce reservation and usage limits.  In OSCARS, RSVP is used as the 
provisioning mechanism.  To ensure that resources are not over-subscribed, QoS is 
carefully configured to provision queues within the network core.  Within ESnet, 
traffic utilizing the OSCARS service is classified into a distinct 
Class-of-Service from all other traffic and isolated into a separate queue by 
itself.  The size of this queue is configured to match the RSVP bandwidth limits 
on each interface, e.g. if the RSVP bandwidth limit on an interface is 50%, the 
"OSCARS" queue is also set at 50%.  This ensures that the RSVP provisioned 
bandwidth will translate to available network bandwidth within the core.

With all of OSCARS traffic using the same Class-of-Service queue within the core, 
it is vital to ensure that the bandwidth usage of each corresponding RSVP 
reservation is strictly adhered to.  This prevents the aggregate traffic from 
overrunning the queue dedicated to the OSCARS service.  To do this, each flow 
utilizing the OSCARS service is policed individually according to the reservation 
bandwidth request.  This policing is done at the ingress point to ESnet.

\subsection{AAA (Mary)}

\section{Interdomain Reservations}
\subsection{other reservation systems and collaborations (David)}
\subsection{architecture of interdomain reservation setup (David)}
\subsection{reverse paths (Jason)}
\subsection{interoperability tests:  (Chin/Jason)}
I2
On Apr 6, 2006, an inter-domain guaranteed bandwidth path between Abilene and 
ESnet was dynamically negotiated and configured by the BRUW and OSCARS systems 
respectively. The unidirectional 25Mb/s guaranteed bandwidth path was configured 
between an Internet2 test host in Indianapolis, IN and an ESnet Performance Center 
[3] host in Sunnyvale, CA.  The path consisted of two unidirectional MPLS Label 
Switched Paths (LSP's), one in Abilene, and the other in ESnet, "stitched" 
together at the Abilene-ESnet peering point in Chicago, IL.

Bandwidth tests using IPerf (see Table X.) revealed predictable results except for 
the guaranteed bandwidth TCP transfer.
<Table to be inserted later>

The guaranteed bandwidth (25Mb/s) TCP transfer should have yielded a throughput 
closer to 25Mb/s.  On further investigation, it was determined that the discrepancy 
between the policing bandwidth and the achieved bandwidth was likely the result of 
two things, first, the lack of traffic shaping at the source end, and second, 
Juniper's policing function.  Similar results have been documented by others [8].

GEANT (aka DANTE/AMPS)
TeraPaths

\section{Future Work}
\subsection{Topology Changes -- dynamic update of the reservations table. (Jason)}
\subsection{Future standards work (Chin)}
\subsection{Testing and testbeds (Chin)}

% Reminder: the "draftcls" or "draftclsnofoot", not "draft", class option
% should be used if it is desired that the figures are to be displayed while
% in draft mode.

% An example of a floating figure using the graphicx package.
% Note that \label must occur AFTER (or within) \caption.
% For figures, \caption should occur after the \includegraphics.
%
%\begin{figure}
%\centering
%\includegraphics[width=2.5in]{myfigure}
% where an .eps filename suffix will be assumed under latex, 
% and a .pdf suffix will be assumed for pdflatex
%\caption{Simulation Results}
%\label{fig_sim}
%\end{figure}


% An example of a double column floating figure using two subfigures.
%(The subfigure.sty package must be loaded for this to work.)
% The subfigure \label commands are set within each subfigure command, the
% \label for the overall fgure must come after \caption.
% \hfil must be used as a separator to get equal spacing
%
%\begin{figure*}
%\centerline{\subfigure[Case I]{\includegraphics[width=2.5in]{subfigcase1}
% where an .eps filename suffix will be assumed under latex, 
% and a .pdf suffix will be assumed for pdflatex
%\label{fig_first_case}}
%\hfil
%\subfigure[Case II]{\includegraphics[width=2.5in]{subfigcase2}
% where an .eps filename suffix will be assumed under latex, 
% and a .pdf suffix will be assumed for pdflatex
%\label{fig_second_case}}}
%\caption{Simulation results}
%\label{fig_sim}
%\end{figure*}



% An example of a floating table. Note that, for IEEE style tables, the 
% \caption command should come BEFORE the table. Table text will default to
% \footnotesize as IEEE normally uses this smaller font for tables.
% The \label must come after \caption as always.
%
%\begin{table}
%% increase table row spacing, adjust to taste
%\renewcommand{\arraystretch}{1.3}
%\caption{An Example of a Table}
%\label{table_example}
%\begin{center}
%% Some packages, such as MDW tools, offer better commands for making tables
%% than the plain LaTeX2e tabular which is used here.
%\begin{tabular}{|c||c|}
%\hline
%One & Two\\
%\hline
%Three & Four\\
%\hline
%\end{tabular}
%\end{center}
%\end{table}


\section{Conclusion}
The conclusion goes here.

% conference papers do not normally have an appendix

% use section* for acknowledgement
\section*{Acknowledgment}
% optional entry into table of contents (if used)
%\addcontentsline{toc}{section}{Acknowledgment}
The authors would like to thank Bob Riddle and Andrew Lake of Internet2, both
for help in the incorporation of BRUW, and for work on interoperability tests.

% trigger a \newpage just before the given reference
% number - used to balance the columns on the last page
% adjust value as needed - may need to be readjusted if
% the document is modified later
%\IEEEtriggeratref{8}
% The "triggered" command can be changed if desired:
%\IEEEtriggercmd{\enlargethispage{-5in}}

% references section
% NOTE: BibTeX documentation can be easily obtained at:
% http://www.ctan.org/tex-archive/biblio/bibtex/contrib/doc/

% can use a bibliography generated by BibTeX as a .bbl file
% standard IEEE bibliography style from:
% http://www.ctan.org/tex-archive/macros/latex/contrib/supported/IEEEtran/bibtex
%\bibliographystyle{IEEEtran.bst}
% argument is your BibTeX string definitions and bibliography database(s)
%\bibliography{IEEEabrv,../bib/paper}
%
% <OR> manually copy in the resultant .bbl file
% set second argument of \begin to the number of references
% (used to reserve space for the reference number labels box)
\begin{thebibliography}{1}

\bibitem{IEEEhowto:kopka}
H.~Kopka and P.~W. Daly, \emph{A Guide to {\LaTeX}}, 3rd~ed.\hskip 1em plus
  0.5em minus 0.4em\relax Harlow, England: Addison-Wesley, 1999.

\end{thebibliography}

% that's all folks
\end{document}


