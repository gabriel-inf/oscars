<html>
<title>OSCARS Reservation Manager Functional Specification</title>
</head>
<body>
<h2>OSCARS Reservation Manager Functional Specification</h2>

<h3>Year 2 Update (DRAFT)</h3>

<em>David Robertson, Chin Guok</em><br/>
<a href="http://www.es.net">ESnet</a><br/><br/>

October 27, 2005<br/>

<h2>Objective</h2>

<p>To develop and deploy a new service that can provide secure guaranteed
bandwidth circuits within ESnet.</p>

<h2>Introduction</h2>

<p><a href="http://www.es.net/oscars/">OSCARS</a> is an acronym for
On-Demand Secure Circuits and Advance Reservation System.  The focus of 
OSCARS is on facilitating bandwidth-intensive large scientific projects.</p>

<p>This document lists the requirements for the reservation manager (RM)
component of OSCARS, updated for year 2 of the project.  The requirements for 
the RM include setting up user accounts, setting up and tracking 
reservations and circuits, handling security and monitoring, and accounting.
(If a parenthesized indicator is given following a requirement's description,
 it indicates the year of the project during which it is scheduled or was
completed.)</p>

<a id="security">
<p>Security is absolutely essential.  The impact of an abuse could be very
large.  A DoS attack could prevent reservations from being processed.  If the
service is compromised, and thus the routers it has access to, the WAN may be 
disabled.  Discussion of the security
implications of requirements are postponed until the 
<a href="https://oscars.es.net/specs/fspec.html#security">section</a>
on security.</p>

<p>Current requirements are largely taken from Chin Guok's Powerpoint
presentations, the OSCARS project Web page, discussions with QoS/MPLS 
researchers at other DOE labs, 
<a href="http://www.internet2.edu">Internet2</a>, 
and 
<a href="http://www.geant2.net">G&Eacute;ANT2</a>, 
and from lessons learned from the initial year one implementation.
If possible, there may be code sharing/reuse between these researchers
and ESnet.  Additional security requirements have been arrived at through
discussion with researchers from the
<a href="http://dsd.lbl.gov/">Distributed Systems Department</a> of the
<a href="http://www.lbl.gov/">Lawrence Berkeley National Laboratory</a>.
</p>

<h3>Scope</h3>

<p>This document covers the requirements for the RM and its
clients.  The requirements for the other major component of
OSCARS, which handles the details of setting up the guaranteed bandwidth
circuit using MPLS and RSVP, are listed in the OSCARS
<a href="http://www.es.net/oscars/documents/OSCARS.pdf">full proposal</a>.</p>

<p>Specific design decisions are in a companion document,
the OSCARS RM <a href="dspec.html">design specification.</a></p>

<p>The RM must interoperate with other autonomous domains, to enable 
reservations where the end-to-end path may traverse several such domains.  In
particular it must interoperate with Internet2 and G&Eacute;ANT2.  
Interdomain operation and security issues are discussed in a 
separate <a href="https://oscars.es.net/specs/id.html">document.</a></p>

<h3>Usability</h3>

<p>Installation and use must be easy as possible.
A standard, well-known mechanism to implement operations such as transport
and server capability, for example Apache or SOAP, is to be preferred.
However, there may be cases where a standard is available for
a certain operation, but is not available in the coding language chosen
and is difficult to implement and use.  In such cases, a simple alternative
mechanism, such as using a database for that operation, is preferable.</p>

<h3>Modes of operation</h3>

<p>The manager must be able to run in conjunction with current ESnet
proprietary network management systems, as well as in a completely open source
mode that other organizations can incorporate and use without additional
licensing.</p>


<h2>Reservation manager</h2>

<p>The RM must have four subsystems:

<ol>
<li>An authentication, authorization, and accounting subsystem (AAAS),<br/>
<li>A bandwidth scheduler subsystem (BSS),<br/>
<li>A path setup subsystem (PSS), and<br/>
<li>A client interface (both an interactive interface and an API),
</ol>


<h3>AAAS</h3>

<p>The AAAS must handle all external requests.
Request arguments are listed in the user interface section (see below).</p>

<p>User account names must be globally unique.</p>

<p>The AAAS must handle the following requests:</p>

<ol>
<li>Request an OSCARS account (y2).
</li><br/>

<li>Login to OSCARS (y1).
</li><br/>

<p>The AAAS must handle the following requests from clients that have 
successfully logged in:</p>

<li>Request information about OSCARS (y1).
</li><br/>

<li>List the details of the client's user profile (y1).
</li><br/>

<li>Modify the details of the client's user account profile (y1).
</li><br/>

<li>Request an allocation of bandwidth to use in making reservations (y3).
</li><br/>

<li>List the client's current allocation and usage (y3).
</li><br/>

<li>Logout from OSCARS (y1).
</li><br/>

<p>In addition, there must be user accounts with administrator privileges.
The AAAS must accept these requests from administrators:</p>

<li>List all user accounts (y1).
</li><br/>

<li>Modify any user account (y1).
</li><br/>

<li>Add a user account (y2).
</li><br/>

<li>Delete a user account (y2).
</li><br/>
</ol>

<p>Requests related to the reservation of bandwidth are 
forwarded to the BSS, and are detailed in the next section.</p>

<h3>BSS</h3>

<p>The BSS must accept reservations, keep track of reservations, and 
maintain information necessary for future reservations:</p>

<ul>
<li>It must maintain a calendaring system to avoid conflicts in
reservations (y1/y2).<br/><br/>

<li>It must determine the path that will be taken, and reserve bandwidth
on the links.  Just prior to the reservation time, it must invoke the
PSS to set up the circuit.  It must also trigger the teardown
of the circuit when the reservation has expired (y1).<br/><br/>

<li>It must estimate future availability of circuits based on current
and archived network statistics (y3).<br/><br/>

<li>It must take into account scheduled maintenance
and track unplanned outages.
If there is a new scheduled outage that conflicts with a reservation already
made, or if there is an unplanned outage on one of the interfaces in that path,
the BSS must retrieve the current topology, and determine a possible new
path(s). (y3)<br/><br/>
</ul>

<p>The BSS must maintain policies associated with the scheduling and actual
use of the network, detect any out-of-policy usage, and enforce the policies
that are not handled by network management tools at the router level.
Enforcement at the router level is not in the scope of this document, but
information that may be necessary for such enforcement
should be communicated to the PSS.</p>

<ul>
<li>Policies must be in place to avoid any interference by the OSCARS system
with production traffic.  These may include those intended to prevent
monopolization of the OSCARS service (y1), and those dictating pre-emption of 
an existing reservation to resolve resource reservation conflicts due to 
network outages (y3).
</li><br/>

<li>The bandwidth used by an application must be compared
against that requested in the the application's reservation.  If the
bandwidth used by the application is over any limit, the BSS must determine 
whether to enforce the relevant policy (y3).
</li><br/>

<li>The total bandwidth consumed at any link involved in currently active 
OSCARS reservations
must be tracked, and if total bandwidth is over the limit, the BSS must
handle policy enforcement (y1).
</li><br/>

<li>If there is an outage, the BSS must determine the policy to use, which
may include limiting new reservations or revising existing reservations
during that time period.  It may also involve
making a request to the PSS to remove the previous circuit and set
the circuit to an alternative path (y3).<br/><br/>

</ul>

<p>The BSS must accept the following client requests, forwarded from the
AAAS:</p>

<ol>
<li>Schedule bandwidth reservation (y1).
</li><br/>

<li>List the client's reservations (y1).
</li><br/>

<li>List the details of a reservation the client has made (y1).
</li><br/>

<li>Cancel a reservation the client has made (y1).
</li><br/>

<li>Modify a reservation the client has made (y2).
</li><br/>
 
<p>In addition, there must be user accounts with system engineer privileges.
The BSS must accept these requests from clients with engineer privileges:</p>

<li>List all clients' reservations (y1).
</li><br/>

<li>List the details of any client's reservation (y1).
</li><br/>

<li>Cancel a reservation that any client has made (y1).
</li><br/>

<li>Modify a reservation that any client has made (y2).
</li><br/>
 
</ol>

<a id="notifications">
<p>The following notifications must be made to clients,
and must include the status of a reservation,
the bandwidth allocated, and the QoS value (y1):</p>

<ul>
<li>A reservation has been successfully placed (y1).
</li><br/>

<li>A reservation has been changed or cancelled (y2).
</li><br/>

<li>An LSP crcuit has been set up, and the status of that setup (y1).
</li><br/>

<li>An LSP circuit has been torn down, and the status of that teardown (y1), 
including the total packets/bytes forwarded (y2).
</li><br/>

<li>A reservation has been terminated that was not in compliance with 
policy (y3).
</li><br/>
</ul>

<h3>PSS</h3>

<p>The PSS must set up and tear down the on-demand circuits on
the appropriate routers, based on a request by the BSS.  To do so, it must
change the router configuration on the start and end of the circuit (y1).</p>

<p>Prior to circuit setup, the PSS must validate the route to use, and
query routers along the path to check for "illegal" active circuits that could
conflict with bandwidth reservation (y2).</p>


<h3>User interface</h3>

<p>The user interface must provide means for making all requests listed in the 
sections on the AAAS and BSS.  Client requests generated by either interactive 
(y1) or automated (y2) means must use the same transport and message encoding 
(for example, SOAP) to communicate with the AAAS.</p>

<p>The API for automated reservations by user applications should utilize
well-known mechanisms.  A service description must be provided that will allow 
automated use of the API (y2).</p>

<p>The interactive interface must be simple and intuitive.  It must prompt a 
user for a credential (username/password, y1) before allowing any 
requests.  It must in general operate within the trusted domain of the 
reservations manager.</p>

<p>After login, the interactive interface must provide entry forms to gather 
the information for requests, which may require an additional step of sending 
the information gathered as a message to the AAAS.  Several requests may 
be combined on a single entry form.</p>

<p>For each mandatory and optional
argument listed below, an entry form must have corresponding input fields 
and/or interactive controls.  The entry form must not include input fields 
corresponding to arguments requiring special client privileges (administrator 
and engineer), if the client does not have those privileges.  There must be 
an area on each entry form for status and error messages (y1), which must be 
updated after each request.</p>

<p>All parameters must be validated on the client side before sending
a request to the AAAS, to avoid unnecessary waiting time for the
client if there is an error.</p>

<p>The following sections list the mandatory and optional arguments for each 
request, and the results returned, if any.</p>


<h4>AAAS requests</h4>

<ol>
<li>Request by a client for an OSCARS account (y2):</br/><br/>

The arguments are the same as those for the request to modify a user's account 
profile, listed below, except for the absence of the current password.
</li><br/>

<li>Login to OSCARS (y1):<br/><br/>

A login name and a password are mandatory arguments.  For the interactive 
interface, general OSCARS information should be readily available after login.
</li><br/>

<li>Request information about OSCARS (y1):<br/><br/>

A listing of information about OSCARS must be returned.
</li><br/>

<li>List the client's user profile (y1):<br/><br/>

A listing must be returned from this request that includes the user's
unique id, first name, last name, organizational membership, personal
description, primary and secondary email addresses, and primary and
secondary phone numbers.  The personal description, and secondary email and
phone numbers are permitted to be empty.  If the request is from an 
administrator, the listing includes the user's privilege level(s).
</li><br/>

<li>Modify the client's user profile (y1):<br/><br/>

The user's current password is a mandatory argument.  If the password
is to be modified, arguments for the new password, listed twice, are
mandatory.  The user's first name, last name, organizational membership,
primary email address, and primary phone number are mandatory arguments.
The user's personal description, secondary email address, and secondary
phone number are optional arguments.
</li><br/>

<li>Request for an allocation to use in making reservations (y3):<br/><br/>

TBD.
</li><br/>

<li>List a client's current allocation and usage (y3):<br/><br/>

TBD.
</li><br/>

<li>Logout from OSCARS (y1):<br/><br/>

In the interactive interface, the returned page must be the initial login
page.
</li><br/>

<p>The following requests require administrator privileges:</p>

<li>List all user accounts (y1):<br/><br/>

The listing returned from the request must include each user's last name,
first name, unique identifier, privilege level, organizational membership,
and current login status.
</li><br/>

<li>Modify any user account (y1):<br/><br/>

Same as request to modify a user's account profile, except that it can be
done for any user's account.
</li><br/>

<li>Add a user account (y2):<br/><br/>

The arguments are the same as those for the request to modify a user's account 
profile, listed above, except for the absence of the current password.
</li><br/>

<li>Delete a user account (y2):<br/><br/>

The user's unique id is a mandatory argument.

</li>
</ol>

<a id="resv">
<h4>BSS requests</h4>

<ol>
<li>Schedule bandwidth reservation:<br/>

<p>The reservation's source, destination, and requested bandwidth, and the 
purpose of the reservation are mandatory arguments.  The reservation's start 
time, duration, source and destination ports, the protocol to use, the DSCP 
bit(s), the ingress and egress loopbacks, and the start time and duration are 
optional arguments.  Default values must be used for the start time and
duration if these arguments are empty.  (y1)</p>

<p>If a request is from an authorized engineer, a traceroute listing, and
flags for the setup of a persistent circuit and a bidirectional path, are 
optional arguments.  A disclaimer must be present on the interactive form 
indicating that if the transit path across ESnet has more than 
one ingress point, a full traceroute must be provided to ensure that the 
requested bandwidth along the actual path is available. (y2)</p>

<p>Upon successful reservation setup, a listing must be returned with the
reservation details (y1).
</li><br/>

<li>List the client's reservations (y1):<br/><br/>

A listing of that client's current, finished, and cancelled reservations must 
be returned as a result of the request.  Each item in the list must include the
unique tag for the reservation, and the start time, end time, status, origin, 
and destination. (y1)  A search filter method, or an interactive element, must be 
provided to narrow the reservations listed, for example by a specific date (y2).
</li><br/>

<li>List the details of a reservation the client has made (y1):<br/><br/>

A listing of that reservation's details must be returned as a result of the 
request.  This information must include the reservation's tag, the unique user
id of the client that made the reservation, and the reservation's description, 
start time, end time,
creation time, bandwidth, burst limit, status, source, destination,
source port, destination port, protocol, DSCP bit(s), and class.  If the
request was from an authorized engineer, the information must also include the
reservation's ingress router and loopback, egress router and loopback, and
the routers in the path traversing ESnet.  
</li><br/>

<li>Cancel a reservation the client has made (y1):<br/><br/>

An API method or interactive element must be provided to cancel a reservation 
identified by its reservation tag.
</li><br/>

<li> Modify a reservation the client has made (y2):<br/><br/>
An API method or interactive element must be provided to modify a reservation 
identified by its reservation tag.  Modifiable arguments must include the 
reservation start and end time, and start and destination of the path.
</li><br/>

<p>The following requests require engineer privileges:</p>

<li>List of all reservations (y1):<br/><br/>

Same as the request for a client's reservation, except that the listing
includes all reservations.
</li><br/>

<li>List the details of any client's reservation (y1):<br/><br/>

Same as the request for details of a client's reservation, except that the 
details can be of any client's reservation.
</li><br/>

<li>Cancel a reservation that any client has made (y1):<br/><br/>

Same as the request by a client for the cancellation of that client's 
reservation, except that any reservation from any client may be cancelled.
</li><br/>

<li>Modify a reservation that any client has made (y2):<br/><br/>

Same as the request by a client for the modification of that client's 
reservation, except that any reservation from any client may be modified.
</li><br/>

</ol>

<a id="security_r">
<h2>Security</h2>

<p>The administration of an end-to-end circuit must conform to security
models of all entities along that path.  In particular, stages leading
towards the eventual rollout of the service must follow the guidelines in the 
ESnet Security Plan. (y2/y3)</p>

<p>OSCARS security mechanisms must be as easy to install and use as
possible, as long as security is not compromised.  A difficult to use system
will not be used.</p>

<p>Access to OSCARS must require authentication and authorization.
All accesses must be logged and audited.
Automated messages to OSCARS must be signed and encrypted.  
Automated access does not require an OSCARS account, if it does not require 
administrator or engineer privileges.  A valid certificate is sufficient,
for example if the request is coming from a reservations manager from
another autonomous domain. (y1/y2)</p>

<p>OSCARS accounts must be provided for administrators and the appropriate
ESnet personnel.  Privilege levels, allowing different levels of access,
must be maintained and enforced. (y1)</p>

<p>A secure means must be provided to store authentication information during
login, to avoid the client having to authenticate for each subsequent access to
OSCARS (y1/y2).</p>

<p>The AAAS must handle all external requests and enforce security restrictions,
including user authentication (y1) and authorization (y2),
and generate usage records for auditing and accounting (y2/y3).

<p>Request parameters must be validated on the server side,
whether the client is the API or the interactive interface. (y1)</p>

<p>All components of the service must be monitored to ensure that they are
not being abused.  
<a href="https://oscars.es.net/specs/fspec.html#notifications">
Notifications</a> 
of sensitive operations such as reservation 
scheduling and LSP setup must be sent to the appropriate ESnet personnel,
in addition to the client. (y2/y3)</p>

<p>The machine hosting the interactive interface must also be 
monitored, and run as few services as possible.  The machines running the AAAS,
BSS, and PSS must be firewalled so that only the machine hosting the
interactive interface, and the machines of ESnet administrators have access.
 (y2)</p>

</body>
</html>


