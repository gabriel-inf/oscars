<html>
<title>OSCARS Reservation Manager Functional Specification</title>
</head>
<body>
<h2>OSCARS Reservation Manager Functional Specification</h2>

<h3>Year 2 Update (DRAFT)</h3>

<em>David Robertson, Chin Guok</em><br/>
ESnet<br/><br/>

September 1, 2005<br/>

<hr>

<h2>Objective</h2>

<p>To develop and deploy a new service that can provide secure guaranteed
bandwidth circuits within ESnet.</p>

<h2>Introduction</h2>

<p><a href="http://www.es.net/oscars/">OSCARS</a> is an acronym for
On-Demand Secure Circuits and Advance Reservation System.  The focus of 
OSCARS is on facilitating bandwidth-intensive large scientific projects.</p>

<p>This document lists the requirements for the reservation manager (RM)
component of OSCARS, updated for year 2 of the project.  The RM's 
responsibilities include setting up user accounts, setting up and tracking 
reservations and circuits, handling security and monitoring, and accounting.</p>

<p>If a parenthesized indicator is given following a requirement's description,
it indicates the year of the project during which it is scheduled or was
completed.
</p>

<p>Current requirements are largely taken from Chin Guok's Powerpoint
presentations, the OSCARS Web page, discussions with QoS/MPLS researchers at 
other DOE labs, Internet2, and GEANT, and from lessons learned from the 
initial year one implementation.
</p>

<h2>Scope</h2>

<p>This document covers the requirements for the RM and its
clients.  The requirements for the other major component of
OSCARS, which handles the details of setting up the guaranteed bandwidth
circuit using MPLS and RSVP, are outside the scope of this document.</p>

<p>Specific design decisions are in a companion document,
the OSCARS RM <a href="dspec.html">design specification.</a></p>

<h2>Use of standards</h2>

<p>The RM must use existing standards for authorization,
authentication, encryption, policy, addressing, resource discovery, messaging,
etc., wherever possible.  The implementation must also attempt to use a minimum
number of standards/packages, to make installation as easy as possible.</p>

<h2>Modes of operation</h2>

<p>The manager must be able to run in conjunction with current ESnet
proprietary network management systems, as well as in a completely open source
mode that other organizations can incorporate and use without additional
licensing.</p>

<h2>Security</h2>

<p>The administration of an end-to-end circuit must conform to security
models of all entities along that path.</p>

<p>All components of the service must be monitored to ensure that they are
not being abused.</p>

<br/>
<hr>

<h2>Reservation manager</h2>

<p>The RM must have four subsystems:

<ol>
<li>An authentication, authorization, and accounting subsystem (AAAS),<br/>
<li>A bandwidth scheduler subsystem (BSS),<br/>
<li>A path setup subsystem (PSS), and<br/>
<li>A client interface (both a interactive interface and an API),<br/>
</ol>

<br/>

<h3>AAAS</h3>

<p>The AAAS must handle all external requests and enforce security restrictions,
including user authentication (y1) and authorization (y2),
and generate usage records for auditing and accounting (y2/y3).
Request arguments are listed in the user interface section (see below).</p>

<p>User account names must be globally unique.</p>

<p>The AAAS must handle the following requests:</p>

<ol>
<li>Request an OSCARS account (y2).
</li><br/>

<li>Login to OSCARS (y1).
</li><br/>

<p>The AAAS must handle the following requests from clients that have 
successfully logged in:</p>

<li>List the details of the client's user profile (y1).
</li><br/>

<li>Modify the details of the client's user account profile (y1).
(y1).
</li><br/>

<li>Request an allocation of bandwidth to use in making reservations (y3).
</li><br/>

<li>List the client's current allocation and usage (y3).
</li><br/>

<p>In addition, there must be user accounts with administrator privileges.
The AAAS must accept these requests from administrators:</p>

<li>List all user accounts (y1).
</li><br/>

<li>Modify any user account (y1).
</li><br/>

<li>Add a user account (y2).
</li><br/>

<li>Delete a user account (y2).
</li><br/>
</ol>

<p>Requests related to the reservation of bandwidth are 
forwarded to the BSS, and are detailed in the next section.</p>

<h3>BSS</h3>

<p>The BSS must accept reservations, keep track of reservations, and 
maintain information necessary for future reservations:</p>

<ul>
<li>It must maintain a calendaring system to avoid conflicts in
reservations (y1/y2).<br/><br/>

<li>It must determine the path that will be taken, and reserve bandwidth
on the links.  Just prior to the reservation time, it must invoke the
PSS to set up the circuit.  It must also trigger the teardown
of the circuit when the reservation has expired (y1).<br/><br/>

<li>It must estimate future availability of circuits based on current
and archived network statistics (y3).<br/><br/>

<li>It must take into account scheduled maintenance
and track unplanned outages.  It must limit new reservations or revise
existing reservations during those time periods, after determining the 
the appropriate policy (y3).<br/><br/>

<li>
If there is a new scheduled outage that conflicts with a reservation already
made, or if there is an unplanned outage on one of the interfaces in that path,
the BSS must try to recompute a new path.  It must get the current topology,
and then determine the new path.
The BSS must make a request to the PSS to remove the previous circuit and set
the circuit to the alternative path (y3).<br/><br/>
</ul>

<p>The BSS must maintain policies associated with the scheduling and actual
use of the network:</p>

<ul>
<li>It must detect any out-of-policy usage, and enforce it (y3).
</li><br/>

<li>Upon receiving a reservation request from a client, the BSS
must extract an authenticated ID and pass it to a Policy Decision Point (PDP)
to authorize the request (y3).<br/><br/> 

<li>Policies must be in place to avoid any interference by the OSCARS system
with production traffic.  These may include those intended to prevent
monopolization of the OSCARS service (y1), and those dictating pre-emption of 
an existing reservation to resolve resource reservation conflicts due to 
network outages (y3).
</li><br/>

<li>The bandwidth used by an application must be compared
against that requested in the the application's reservation.  If the
bandwidth used by the application is over any limit, the BSS must determine 
whether to enforce the relevant policy (y3).
</li><br/>

<li>The total bandwidth consumed by all currently active OSCARS reservations
must be tracked, and if total bandwidth is over the limit, the BSS must
handle policy enforcement (y1).
</li><br/>
</ul>

<p>The BSS must accept the following client requests, forwarded from the
AAAS:</p>

<ol>
<li>Schedule bandwidth reservation (y1).
</li><br/>

<li>List the client's reservations (y1).
</li><br/>

<li>List the details of a reservation the client has made (y1).
</li><br/>

<li>Cancel a reservation the client has made (y1).
</li><br/>

<li>Modify a reservation the client has made (y2).
</li><br/>
 
<p>In addition, there must be user accounts with system engineer privileges.
The BSS must accept these requests from clients with engineer privileges:</p>

<li>List all clients' reservations (y1).
</li><br/>

<li>List the details of any client's reservation (y1).
</li><br/>

<li>Cancel a reservation that any client has made (y1).
</li><br/>

<li>Modify a reservation that any client has made (y2).
</li><br/>
 
</ol>

<p>The following notifications must be made to clients,
and must include the status of a reservation,
the bandwidth allocated, and the QoS value (y1):</p>

<ul>
<li>A reservation has been successfully placed (y1).
</li><br/>

<li>A reservation has been changed or cancelled (y2).
</li><br/>

<li>An LSP crcuit has been set up, and the status of that setup (y1).
</li><br/>

<li>An LSP circuit has been torn down, and the status of that teardown (y1), 
including the total packets/bytes forwarded (y2).
</li><br/>

<li>A reservation has been terminated that was not in compliance with 
policy (y3).
</li><br/>
</ul>

<h3>PSS</h3>

<p>The PSS must set up and tear down the on-demand circuits on
the appropriate routers, based on a request by the BSS.  To do so, it must
change the router configuration on the start and end of the circuit (y1).</p>

<p>Prior to circuit setup, the PSS must validate the route to use, and
query routers along the path to check for "illegal" active circuits that could
conflict with bandwidth reservation (y2).</p>

<br/>

<h3>User interface</h3>

<p>The user interface must provide means for making all requests listed in the 
sections on the AAAS and BSS.  Client requests generated by either interactive 
(y1) or automated (y2) means must use the same transport and message encoding 
(for example, SOAP) to communicate with the AAAS.</p>

<p>The API for automated reservations by user applications should utilize
well-known mechanisms.  A service description must be provided that will allow 
automated use of the API (y2).</p>

<p>The interactive interface must be simple and intuitive.  It must prompt a 
user for a username/password (y1) or certificate (y2) before allowing any 
requests.  It must in general operate within the trusted domain of the 
resource manager.</p>

<p>After login, the interactive interface must provide entry forms to gather 
the information for requests, which may require an additional step of sending 
the information gathered as a message to the AAAS.  Several requests may 
be combined on a single entry form.</p>

<p>For each mandatory and optional
argument listed below, an entry form must have corresponding input fields 
and/or interactive controls.  The entry form must not include input fields 
corresponding to arguments requiring special client privileges (administrator 
and engineer), if the client does not have those privileges.  There must be 
an area on each entry form for status and error messages (y1), which must be 
updated after each request.</p>

<p>The following sections list the mandatory and optional arguments for each 
request, and the results returned, if any.</p>


<h4>AAAS requests</h4>

<ol>
<li>Request by a client for an OSCARS account (y2):<br/><br/>

The arguments are the same as those for the request to modify a user's account 
profile, listed below, except for the absence of the current password.
</li><br/>

<li>Login to OSCARS (y1):<br/><br/>

A login name and a password are mandatory arguments.  For the interactive 
interface, general OSCARS information should be readily available after login.
</li><br/>

<li>List the client's user profile 
(y1):<br/><br/>

A listing must be returned from this request that includes the user's
unique id, first name, last name, organizational membership, personal
description, primary and secondary email addresses, and primary and
secondary phone numbers.  The personal description, and secondary email and
phone numbers are permitted to be empty.  If the request is from an 
administrator, the listing includes the user's privilege level(s).
</li><br/>

<li>Modify the client's user profile (y1):<br/><br/>

The user's current password is a mandatory argument.  If the password
is to be modified, arguments for the new password, listed twice, are
mandatory.  The user's first name, last name, organizational membership,
primary email address, and primary phone number are mandatory arguments.
The user's personal description, secondary email address, and secondary
phone number are optional arguments.

</li><br/>

<li>Request for an allocation to use in making reservations (y3):<br/><br/>

TBD.
</li><br/>

<li>List a client's current allocation and usage (y3):<br/><br/>

TBD.
</li>

<p>The following requests require administrator privileges.</p>

<li>List all user accounts (y1):<br/><br/>

The listing returned from the request must include each user's last name,
first name, unique identifier, privilege level, organizational membership,
and current login status.
</li><br/>

<li>Modify any user account (y1):<br/><br/>

Same as request to modify a user's account profile, except that it can be
done for any user's account.
</li><br/>

<li>Add a user account (y2):<br/><br/>

The arguments are the same as those for the request to modify a user's account 
profile, listed above, except for the absence of the current password.
</li><br/>

<li>Delete a user account (y2):<br/><br/>

The user's unique id is a mandatory argument.

</li><br/>
</ol>

<h4>BSS requests</h4>

<ol>
<li>Schedule bandwidth reservation:<br/>

<p>The reservation's source, destination, and requested bandwidth, and the 
purpose of the reservation are mandatory arguments.  The reservation's start 
time, duration, source and destination ports, the protocol to use, the DSCP 
bit(s), the ingress and egress loopbacks, and the start time and duration are 
optional arguments.  Default values must be used for the start time and
duration if these arguments are empty.  (y1)</p>

<p>If a request is from an authorized engineer, a traceroute listing, and
flags for the setup of a persistent circuit and a bidirectional path, are 
optional arguments.  A disclaimer must be present on the interactive form 
indicating that if the transit path across ESnet has more than 
one ingress point, a full traceroute must be provided to ensure that the 
requested bandwidth along the actual path is available.</p>

<p>Upon successful reservation setup, a listing must be returned with the
reservation details (y1).
</li><br/>

<li>List the client's reservations (y1):<br/><br/>

A listing of that client's current, finished, and cancelled reservations must 
be returned as a result of the request.  Each item in the list must include the
unique tag for the reservation, and the start time, end time, status, origin, 
and destination. (y1)  A search filter method, or an interactive element, must be 
provided to narrow the reservations listed, for example by a specific date (y2).
</li><br/>

<li>List the details of a reservation the client has made (y1):<br/><br/>

A listing of that reservation's details must be returned as a result of the 
request.  This information must include the reservation's tag, the unique user
id of the client that made the reservation, and the reservation's description, 
start time, end time,
creation time, bandwidth, burst limit, status, source, destination,
source port, destination port, protocol, DSCP bit(s), and class.  If the
request was from an authorized engineer, the information must also include the
reservation's ingress router and loopback, egress router and loopback, and
the routers in the path traversing ESnet.  
</li><br/>

<li>Cancel a reservation the client has made (y1):<br/><br/>

An API method or interactive element must be provided to cancel a reservation 
identified by its reservation tag.
</li><br/>

<li> Modify a reservation the client has made (y1):<br/><br/>
An API method or interactive element must be provided to modify a reservation 
identified by its reservation tag.  Modifiable arguments must include the 
reservation start and end time, and start and destination of the path.
</li><br/>

<p>The following requests require engineer privileges.</p>

<li>List of all reservations (y1):<br/><br/>

Same as the request for a client's reservation, except that the listing
includes all reservations.
</li><br/>

<li>List the details of any client's reservation (y1):<br/><br/>

Same as the request for details of a client's reservation, except that the 
details can be of any client's reservation.
</li><br/>

<li>Cancel a reservation that any client has made (y1):<br/><br/>

Same as the request by a client for the cancellation of that client's 
reservation, except that any reservation from any client may be cancelled.
</li><br/>

<li>Modify a reservation that any client has made (y1):<br/><br/>

Same as the request by a client for the modification of that client's 
reservation, except that any reservation from any client may be modified.
</li><br/>

</ol>


</body>
</html>


