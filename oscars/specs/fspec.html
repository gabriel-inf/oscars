<html>
<title>OSCARS Reservation Manager Functional Specification</title>
</head>
<body>
<h2>OSCARS Reservation Manager Functional Specification</h2>

<h3>Year 2 Update (DRAFT)</h3>

<em>David Robertson, Chin Guok</em><br/>
ESnet<br/><br/>

August 31, 2005<br/>

<hr>

<h2>Objective</h2>

<p>To develop and deploy a new service that can provide secure guaranteed
bandwidth circuits within ESnet.</p>

<h2>Introduction</h2>

<p><a href="http://www.es.net/oscars/">OSCARS</a> is an acronym for
On-Demand Secure Circuits and Advance Reservation System.  The focus of 
OSCARS is on facilitating bandwidth-intensive large scientific projects.</p>

<p>This document lists the requirements for the reservation manager (RM)
component of OSCARS, updated for year 2 of the project.  The RM's 
responsibilities include setting up user accounts, setting up and tracking 
reservations and circuits, handling security and monitoring, and accounting.</p>

<p>If a parenthesized indicator is given following a requirement's description,
it indicates the year of the project during which it is scheduled or was
completed.
</p>

<p>Current requirements are largely taken from Chin Guok's Powerpoint
presentations, the OSCARS Web page, discussions with
QoS/MPLS researchers at other DOE labs and  Internet2, and from lessons
learned from the initial year one implementation.
</p>

<h2>Scope</h2>

<p>This document covers the requirements for the RM and its
clients.  The requirements for the other major component of
OSCARS, which handles the details of setting up the guaranteed bandwidth
circuit using MPLS and RSVP, are outside the scope of this document.</p>

<p>Specific design decisions are in a companion document,
the OSCARS RM <a href="dspec.html">design specification.</a></p>

<h2>Use of standards</h2>

<p>The RM must use existing standards for authorization,
authentication, encryption, policy, addressing, resource discovery, messaging,
etc., wherever possible.  The implementation must also attempt to use a minimum
number of standards/packages, to make installation as easy as possible.</p>

<h2>Modes of operation</h2>

<p>The manager must be able to run in conjunction with current ESnet
proprietary network management systems, as well as in a completely open source
mode that other organizations can incorporate and use without additional
licensing.</p>

<h2>Security</h2>

<p>The administration of an end-to-end circuit must conform to security
models of all entities along that path.</p>

<p>All components of the service must be monitored to ensure that they are
not being abused.</p>

<br/>
<hr>

<h2>Reservation manager</h2>

<p>The RM must have four subsystems:

<ol>
<li>An authentication, authorization, and accounting subsystem (AAAS),<br/>
<li>A bandwidth scheduler subsystem (BSS),<br/>
<li>A path setup subsystem (PSS), and<br/>
<li>A client interface (both a interactive interface and an API),<br/>
</ol>

<br/>

<h3>AAAS</h3>

<p>The AAAS must handle all external requests and enforce security restrictions,
including user authentication (y1) and authorization (y2),
and generate usage records for auditing and accounting (y2/y3).
Arguments to requests correspond to input arguments that are listed
in the section below on the user interface, and are not duplicated here.</p>

<p>User account names must be globally unique.</p>

<p>The AAAS must handle the following requests:</p>

<ol>
<li>Request for an OSCARS account (y2).
</li><br/>

<li>Request to login to OSCARS (y1).
</li><br/>

<p>The AAAS must handle the following requests from users who have 
successfully logged in:</p>

<li>Request to view and edit the details of a user's account profile (y1).
</li><br/>

<li>Request for an allocation of bandwidth to use in making reservations (y3).
</li><br/>

<li>Request to view a user's current allocation and usage (y3).
</li><br/>

<p>In addition, there must be user accounts with administrative privileges.
The AAAS must accept these requests from administrators:</p>

<li>Request to view all user accounts, and to edit their profiles (y1).
</li><br/>

<li>Request to add user account (y2).
</li><br/>

<li>Request to delete a user account (y2).
</li><br/>
</ol>

<p>Requests related to the reservation of bandwidth are 
forwarded to the BSS, and are detailed in the next section.</p>

<h3>BSS</h3>

<p>The BSS must accept reservations, keep track of reservations, and 
maintain information necessary for future reservations:</p>

<ul>
<li>Upon receiving a reservation request from a client, the BSS
must extract an authenticated ID and pass it to a Policy Decision Point (PDP)
to authorize the request.  After authorization is obtained, the BSS
must attempt to schedule the reservation (y3).<br/><br/>

<li>The BSS must maintain a calendaring system to avoid conflicts in
reservations (y1/y2).<br/><br/>

<li>The BSS must determine the path that will be taken, and reserve bandwidth
on the links.  Just prior to the reservation time, the BSS must invoke the
PSS to set up the circuit.  The BSS must also trigger the teardown
of the circuit when the reservation has expired (y1).<br/><br/>

<li>The BSS must estimate future availability of circuits based on current
and archived network statistics (y3).<br/><br/>

<li>The BSS must take into account scheduled maintenance
and track unplanned outages.  It must limit new reservations or revise
existing reservations during those time periods, after determining the 
the appropriate policy (y3).<br/><br/>

<li>
If there is a new scheduled outage that conflicts with a reservation already
made, or if there is an unplanned outage on one of the interfaces in that path,
the BSS must try to recompute a new path.  It must get the current topology,
and then determine the new path.
The BSS must make a request to the PSS to remove the previous circuit and set
the circuit to the alternative path (y3).<br/><br/>

</ul>

<p>The BSS must accept the following client requests, forwarded from the
AAAS:</p>

<ol>
<li>Request for bandwidth reservation (y1).
</li><br/>

<li>Request by a client for a list of that client's reservations (y1).
</li><br/>

<li>Request by a client for details of a reservation that client has made (y1).
</li><br/>

<li>Request by a client to cancel a reservation that client has made (y1).
</li><br/>

<li>Request by a client to modify a reservation that client has made (y2).
</li><br/>
 
<p>In addition, there must be user accounts with system engineer privileges.
The BSS must accept these requests from system engineers:</p>

<li>Request for a list of all clients' reservations (y1).
</li><br/>

<li>Request for the details of any client's reservation (y1).
</li><br/>

<li>Request to cancel a reservation that any client has made (y1).
</li><br/>

<li>Request to modify a reservation that any client has made (y2).
</li><br/>
 
</ol>

<p>The following notifications must be made to clients,
and must include the status of a reservation,
the bandwidth allocated, and the QoS value (y1).</p>

<ul>
<li>Notification of a reservation being successfully placed (y1).
</li><br/>

<li>Notification of a reservation being changed or cancelled (y2).
</li><br/>

<li>Notification of LSP setup and the status of that setup (y1).
</li><br/>

<li>Notification of LSP teardown and the status of that teardown (y1), 
including the total packets/bytes forwarded (y2).
</li><br/>
</ul>

<p>The BSS must handle policies associated with the scheduling and actual
use of the network:</p>

<ul>
<li>Policies must be in place to avoid any interference by the OSCARS system
with production traffic.  Policies may include those intended to prevent
monopolization of the OSCARS service (y1), and those dictating pre-emption of an
existing reservation to resolve resource reservation conflicts due to network
outages (y2).
</li><br/>

<li>The BSS must maintain any policy that restricts any resource that the BSS
tracks.  The BSS must detect any out-of-policy usage, and enforce it.
A user must be notified of any
reservations that were not in compliance with policy and terminated (y3).
</li><br/>

<li>The bandwidth used by an application must be compared
against that requested in the the application's reservation.  If the
BSS determines that bandwidth used by the application is over any limit,
it must determine whether to enforce the relevant
policy (y3).
</li><br/>

<li>The total bandwidth consumed by all currently active OSCARS reservations
must be tracked, and if total bandwidth is over the limit, the BSS must
handle policy enforcement (y1).
</li><br/>

</ul>

<h3>PSS</h3>

<p>The PSS must set up and tear down the on-demand circuits on
the appropriate routers, based on a request by the BSS.  To do so, it must
change the router configuration on the start and end of the circuit (y1).</p>

<p>Prior to circuit setup, the PSS must validate the route to use, and
query routers along the path to check for "illegal" active circuits that could
conflict with bandwidth reservation (y2).</p>

<br/>

<h3>User interface</h3>

<p>The user interface must provide means for making all requests listed in the 
sections on the AAAS and BSS.  Client requests generated by either interactive 
(y1) or automated (y2) means must use the same transport and message encoding 
(for example, SOAP) to communicate with the AAAS.</p>

<p>The API for automated reservations by user applications should utilize
well-known mechanisms.  A service description must be provided that will allow 
automated use of the API (y2).</p>

<p>The interactive interface must be simple and intuitive.  It must prompt a 
user for a username/password (y1) or certificate (y2) before allowing any 
requests.  It must in general operate within the trusted domain of the 
resource manager.</p>

<p>After login, the interactive interface must provide entry forms to gather 
the information for requests, which may require an additional step of sending 
the information gathered as a message to the AAAS.  Several requests may 
be combined on a single entry form.</p>

<p>For each required and optional request 
argument listed below, an entry form must have corresponding input fields 
and/or interactive controls.  The entry form must not include input fields 
corresponding to arguments requiring special client privileges (administrative 
and engineering), if the client does not have those privileges.  There must be 
an area on an entry form for status and error messages (y1), which is updated 
after each request.</p>

<p>The following sections list the input arguments required for each request,
and the results returned, if any.</p>


<h4>AAAS requests</h4>

<ol>
<li>Request by a client for an OSCARS account (y2):<br/><br/>
</li><br/>

<li>Request to login to OSCARS (y1):<br/><br/>

Request arguments must include a login name and a password.  For the
interactive interface, general OSCARS
information should be readily available after login.
</li><br/>

<li>Request to list/modify a user's account profile (y1):<br/><br/>
</li><br/>

<li>Request for an allocation to use in making reservations (y3):<br/><br/>
</li><br/>

<li>Request to view client's current allocation and usage (y3):<br/><br/>
</li><br/>

<p>The following requests require administrative privileges.</p>

<li>Request to view all user accounts (y3):<br/><br/>
</li><br/>

<li>Request to add a user account (y2):<br/><br/>
</li><br/>

<li>Request to delete a user account (y2):<br/><br/>
</li><br/>
</ol>

<h4>BSS request forms</h4>

<ol>
<li>Request for bandwidth reservation:<br/><br/>

Request arguments must include the reservation source and destination, the 
requested bandwidth, and the purpose of the reservation.  Arguments may 
include the source and destination ports, the protocol to use, the DSCP 
bit(s), the ingress and egress loopbacks, and the start time and duration of 
the desired reservation.  If the start time or duration is left out, default 
values must be used.  If a client has proven that it has engineering 
privileges, an argument must be included allowing the setup of a persistent 
circuit.</p>

<p>A disclaimer must be present on the interactive form indicating that if the 
transit path across ESnet has more than one ingress point, a full traceroute 
must be provided to ensure that the requested bandwidth is actually 
available.  An argument for the traceroute, and an argument indicating whether 
a user wants to set up a bidrectional path, must be included (y2).</p>

<p>Upon successful reservation setup, a listing must be returned with the
reservation details.
</li><br/>

<li>Request by a client for a list of that client's reservations (y1):<br/><br/>

A listing of that client's current, finished, and cancelled reservations must 
be returned as a result of the request.  Each item in the list must include a 
unique tag for the reservation, and the start time, end time, status, origin, 
and destination.  A search filter method, or an interactive element, must be 
provided to narrow the reservations listed, for example by a specific date (y2).
</li><br/>

<li>Request by a client for details of a reservation that client has made (y1):<br/><br/>

A listing of that reservation's details must be returned as a result of the 
request.  This information must include the reservation's tag, the user who
requested it, and the reservation's description, start time, end time,
creation time, bandwidth, burst limit, status, source, destination,
source port, destination port, protocol, DSCP bit(s), and class.  If the
user has engineering privileges, the information must also include the
reservation's ingress router and loopback, egress router and loopback, and
the routers in the path traversing ESnet.  
</li><br/>

<li>Request by a client to cancel a reservation that client has made (y1):<br/><br/>

An API method or interactive element must be provided to cancel a reservation 
identified by its reservation tag.
</li><br/>

<li>Request by a client to modify a reservation that client has made (y1):<br/><br/>
An API method or interactive element must be provided to modify a reservation 
identified by its reservation tag.  Modifiable arguments must include the 
reservation start and end time, and start and destination of the path.
</li><br/>

<p>The following requests require engineering privileges.</p>

<li>Request for a list of all reservations (y1):<br/><br/>

Same as the request for a client's reservation, except that the listing
includs all reservations.
</li><br/>

<li>Request for the details of any client's reservations (y1):<br/><br/>

Same as the request for details of a client's reservation, except that the 
details can be from any client's reservation.
</li><br/>

<li>Request to cancel a reservation that any client has made (y1):<br/><br/>

Same as the request by a client for the cancellation of that client's 
reservation, except that any reservation from any client may be cancelled.
</li><br/>

<li>Request to modify a reservation that any client has made (y1):<br/><br/>

Same as the request by a client for the modification of that client's 
reservation, except that any reservation from any client may be modified.
</li><br/>

</ol>


</body>
</html>


