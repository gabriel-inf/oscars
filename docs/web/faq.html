<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>OSCARS FAQ</title>
  <base href="/docs">
  <link rel="stylesheet" href="styleSheets/oscars.css" type="text/css">
  <link rel="shortcut icon" href="images/esnet.ico" type="image/x-icon">
</head>
<body>
<!--#include virtual="header.html" -->
<div id="topBar" class="topBar">
<div class="topBarDiv">&nbsp;&nbsp; <a href="index.html">home
</a> &gt;&nbsp;<a href="faq.html">FAQ</a><br>
</div>
</div>
<h1>OSCARS FAQ</h1>
<h3>Table of Contents</h3>
<a href="#Installation">Installation</a><br>
<div style="margin-left: 40px;"><a href="RampartLoad">Rampart fails to
load</a><br>
</div>
<a href="#Maintenance">Maintenance</a><br>
<div style="margin-left: 40px;"><a href="#CodeChanges">Code changes
don't show up after a deploy</a><br>
<a href="#BackupDatabases">How to back up data bases</a><br>
</div>
<a href="#Configuration">Configuration</a><br>
<div style="margin-left: 40px;"><a href="#SESSIONS.ser">File not found:
SESSIONS.ser</a><br>
</div>
<a href="#Security">Security</a>
<br>
<div style="margin-left: 40px;"><a href="#valid_certification_path">Unable
to find a valid certification path</a>
<br>
<a href="#timestamp_failed">timestamp failed</a><br>
</div>
<br>
<br>
<h2><a name="Installation"></a>Installation</h2>
<ul>
  <li><b><a name="RampartLoad"></a>I installed the rampart.mar file in
webapps/axis2/WEB_INF/modules and get the following error on startup: <br>
    </b></li>
  <li><b>&nbsp;</b></li>
  <li><code>[ERROR] The rampart-1.3.mar module, which is not valid,
caused org.apache.rampart.Rampart<br>
org.apache.axis2.deployment.DeploymentException:
org.apache.rampart.Rampart</code><br>
  </li>
  <li><br>
  </li>
  <li>This is because the axis2
1.3 default .war does NOT include some libraries Rampart needs. And,
due to Axis2's special classloaders, placing those libraries in the
Tomcat shared library folder won't work. Locate the following files: <br>
    <pre>From rampart-1.3, all the .jars under lib:<br>	bcprov-jdk15-132.jar    <br>	opensaml-1.1.jar     <br>	rampart-core-1.3.jar    <br>	rampart-trust-1.3.jar   <br>	rampart-policy-1.3.jar  <br>	wss4j-1.5.3.jar<br>	xmlsec-1.4.0.jar		<br></pre>
Copy all the above to CATALINA_HOME/webapps/axis2/WEB-INF/lib/ , and
restart Tomcat.
Rampart should work now.</li>
  <br>
  <hr style="width: 75%; height: 2px;"> <li>Alternatively build an
axis2.war file that contains rampart.</li>
  <ul>
    <li>Download the axis2 1.3 standard binary distribution and the
rampart 1.3 packages from Apache and
unzip them in a common directory.</li>
    <br>
    <li>Set the AXIS2_HOME environment variable to the directory in
which axis2 was put.</li>
    <br>
    <li>Run ant in the rampart-1.3 directory. This will copy the
rampart
jars to axis2 lib.</li>
    <br>
    <li>In the axis2-1.3/webapp directory, edit the create.war target
in
build.xml to remove the lines:
      <pre>     &lt;exclude name="axis2-adb-codegen*.jar"/&gt;<br>     &lt;exclude name="axis2-codegen*.jar"/&gt;<br>     &lt;exclude name="jibx-bind*.jar"/&gt;</pre>
    </li>
    <li>Then run ant to create an axis2.war file that includes rampart
and its required classes.</li>
    <li><br>
    </li>
    <li>Install the axis2.war in $CATALINA_HOME/webapps.<br>
    </li>
  </ul>
</ul>
<h2><a name="Configuration"></a>Configuration</h2>
<div style="margin-left: 40px;"><span style="font-weight: bold;"><a
 name="SESSIONS.ser"></a>File not found: SESSIONS.ser<br>
<br>
</span>I get the following error when Tomcat is shut down.<br>
<br>
<code>[ERROR] org.apache.catalina.session.ManagerBase -&nbsp;
IOException
while saving persisted sessions: java.io.FileNotFoundException:
/usr/local/apache-tomcat-5.5.25/work/Catalina/localhost/axis2/SESSIONS.ser
(No such file or directory)<br>
java.io.FileNotFoundException:
/usr/local/apache-tomcat-5.5.25/work/Catalina/localhost/axis2/SESSIONS.ser
(No such file or directory)</code><br>
<br>
Uncomment out the last line in conf/context.xml<br>
<br>
&nbsp;&nbsp;&nbsp; &lt;!-- Uncomment this to disable session
persistence across Tomcat restarts --&gt;<br>
&nbsp;&nbsp;&nbsp; &lt;Manager pathname="" /&gt;<br>
</div>
<br>
<br>
<h2><a name="Maintenance"></a>Maintenance</h2>
<ul>
  <li><b><a name="CodeChanges"></a>I ran ant deployall to compile and
deploy a new version of the
code, but my changes aren't showing! What's wrong?</b><br>
Remember to shut down Tomcat and kill -2 the scheduler process before
deploying, then
start them again. </li>
  <li><b><a name="BackupDatabases"></a>I want to back up OSCARS. How do
I do this?</b><br>
First, stop Tomcat and the scheduler process. Then, back up the bss and
aaa
MySQL databases with your favorite MySQL backup tool like mysqldump. </li>
</ul>
<h2><a name="Security"></a>Security</h2>
<div style="margin-left: 40px;">&nbsp;&nbsp; <a
 name="valid_certification_path"></a><span style="font-weight: bold;">unable
to find valid certification path to requested target</span> <br>
<br>
I am trying to test the service interface from a
client on the server machine. I am using the server url of
https://localhost:8443/axis2/services/OSCARS and get the following
error:<br>
<code>- I/O exception (org.apache.axis2.AxisFault) caught when
processing
request: sun.security.validator.ValidatorException: PKIX path building
failed: sun.security.provider.certpath.SunCertPathBuilderException:
unable to find valid certification path to requested target</code><br>
<br>
If you configure your server to listen on an http port as well as https
you can test it using plain http. See conf/server.xml to configure the
ports on which Tomcat is listening.</div>
<p style="margin-left: 40px;">
For SSL to work, the issuer of the certificate that is in Tomcat's
keystore
(defined
in conf/server.xml) must be in the
client's
repo/ssl-keystore.jks. If you are using a self-signed certificate for
Tomcat
the certificate itself must be in repo/ssl-keystore.jks. You can use
keytool
to export
the certificate from Tomcat's keystore and import it into the client
ssl-keystore.
Use keytool -help to tell you how to do this. <br>
</p>
<p style="margin-left: 40px; font-weight: bold;"><a
 name="timestamp_failed"></a>org.apache.ws.security.WSSecurityException:
General security error (Error during certificate path validation:
timestamp check failed)<br>
</p>
<p style="margin-left: 40px; font-weight: bold;"><span
 style="font-weight: normal;">I get the the following error when trying
to connect to an OSCARS web service<br>
</span></p>
<p style="margin-left: 40px;"><code>hopishib.internet2.edu:8443/axis2/services/OSCARSWSHandler:
Certificate path verification failed for certificate with subject
CN=oscars/oscars-dev.es.net, OU=Services, DC=doegrids, DC=org; nested
exception is:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
org.apache.ws.security.WSSecurityException: General security error
(Error during certificate path validation: timestamp check failed);
nested exception is:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
java.security.cert.CertPathValidatorException: timestamp check failed
</code><br>
</p>
<p style="margin-left: 40px;">Check to see if the certificate for the
issuer for the offending certificate is expired in the <br>
shared/classes/sec-security.jks keystore for the target web service.<br>
</p>
<h2><a style="font-weight: normal;" name="Web_Interface"></a>Web
Interface</h2>
<h2><a name="Web_Service"></a>Web Service</h2>
<h2><a name="Error_messages"></a>Error messages</h2>
<!--#include virtual="footer.html" -->
</body>
</html>
