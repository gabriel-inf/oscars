<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Configuring Notifications</title>
  <link rel="stylesheet" href="styleSheets/oscars.css" type="text/css">
  <link rel="shortcut icon" href="images/esnet.ico" type="image/x-icon">
</head>
<body>
<!--#include virtual="header.html" -->
<div id="topBar" class="topBar">
<div class="topBarDiv"> &nbsp; <a href="index.html">home</a> &gt; <a
 href="notifications.html">Configuring Notifications</a>
</div>
</div>
<h2>Configuring Notifications</h2>
OSCARS includes the ability to send notifications of events that occur as 
reservations are processed. The OSCARS <i>notification server</i> is the 
component that listens to the various OSCARS processes and distributes the 
notifications. Notifications may take many forms including emails, 
web service messages, or domain-specific API calls to a monitoring service. 
OSCARS comes pre-installed with a module for sending email notifications, but
it is possible to write custom modules that send other types of notifications. 
This section describes how to run the notification server and how to customize 
email messages sent by the default module.<br>
<br>
<h3>Starting the Notification Server</h3>
<div style="margin-left: 40px;">The OSCARS notification server is included
in the distribution and can be found in the tools/notify directory. Run the 
following commands to start the notification server:
<ul>
    <li>
        <code style="font-weight: bold;">cd tools/notify</code><br>
        <code style="font-weight: bold;">nohup ./idc-notify-server &</code>
    </li>
</ul>
</div>
<br>
<h3>Event Types</h3>
<div style="margin-left: 40px;">
Below is a list of events that may trigger notifications to be sent.<br>
<br>
Basic Operations:
<table
 style="margin-left: auto; margin-right: auto; text-align: left; width: 639px; height: 138px;"
 border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <th style="vertical-align: top;">Event Name<br>
      </th>
      <th style="vertical-align: top;">Description<br>
      </th>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CREATE_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CREATE_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_MODIFY_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_MODIFY_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CANCEL_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CANCEL_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_SETUP_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_SETUP_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_TEARDOWN_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_TEARDOWN_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">LIST_RESERVATION_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">LIST_RESERVATION_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">QUERY_RESERVATION_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">QUERY_RESERVATION_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_PERIOD_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_PERIOD_FINISHED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CANCELLED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_EXPIRES_IN_1DAY<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_EXPIRES_IN_7DAYS<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_EXPIRES_IN_30DAYS<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
  </tbody>
</table><br>
<br>
Messaging:
<table
 style="margin-left: auto; margin-right: auto; text-align: left; width: 639px; height: 138px;"
 border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <th style="vertical-align: top;">Event Name<br>
      </th>
      <th style="vertical-align: top;">Description<br>
      </th>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CREATE_RECEIVED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CREATE_RETURNED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_MODIFY_RECEIVED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_MODIFY_RETURNED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CANCEL_RECEIVED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CANCEL_RETURNED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_SETUP_RECEIVED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_SETUP_RETURNED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_TEARDOWN_RECEIVED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_TEARDOWN_RETURNED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">LIST_RESERVATION_RECEIVED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">LIST_RESERVATION_RETURNED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">QUERY_RESERVATION_RECEIVED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">QUERY_RESERVATION_RETURNED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
  </tbody>
</table>
<br>
<br>
Forwarding:
<table
 style="margin-left: auto; margin-right: auto; text-align: left; width: 639px; height: 138px;"
 border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <th style="vertical-align: top;">Event Name<br>
      </th>
      <th style="vertical-align: top;">Description<br>
      </th>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CREATE_FORWARD_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CREATE_FORWARD_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_MODIFY_FORWARD_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_MODIFY_FORWARD_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CANCEL_FORWARD_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CANCEL_FORWARD_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_SETUP_FORWARD_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_SETUP_FORWARD_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_TEARDOWN_FORWARD_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_TEARDOWN_FORWARD_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">LIST_RESERVATION_FORWARD_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">LIST_RESERVATION_FORWARD_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">QUERY_RESERVATION_FORWARD_STARTED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">QUERY_RESERVATION_FORWARD_COMPLETED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
  </tbody>
</table><br>
<br>
Errors:
<table
 style="margin-left: auto; margin-right: auto; text-align: left; width: 639px; height: 138px;"
 border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <th style="vertical-align: top;">Event Name<br>
      </th>
      <th style="vertical-align: top;">Description<br>
      </th>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CREATE_FAILED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_MODIFY_FAILED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">RESERVATION_CANCEL_FAILED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_SETUP_FAILED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">PATH_TEARDOWN_FAILED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">LIST_RESERVATION_FAILED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">QUERY_RESERVATION_FAILED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">IDC_FAILED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">FORWARDING_FAILED<br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
  </tbody>
</table>
</div>
<br>
<h3>Email Notifications</h3>
<div style="margin-left: 40px;">
OSCARS comes pre-installed with a module that sends email notifications 
of events. This module has customization capabilites that allow administrators
to tailor messages to their specific needs.  The format of messages is 
determined by the templates found in 
<span style="font-weight: bold;">$CATALINA_HOME/shared/classes/server/mail_templates</span>. 

The name of each template file takes the form of of <i>EVENT_NAME</i>.xml where
<i>EVENT_NAME</i> corresponds to the event that triggers the email message 
using the template. If no template file exists for a particular event then no
email notifications will be sent for that event. <br>
<br>
The template files follow a very simple XML format. The template is wrapped 
inside an <span style="font-weight: bold;">oscarsMail</span> element that has
the following subelements:
<ul>
    <li>
    <span style="font-weight: bold;">contentType (optional)</span> - 
    The content-type of the message contained in the email body. This value 
    defaults to 'text/plain' meaning the email sent contains basic text.
    This field may be changed to 'text/html' for messages that contain HTML.
    </li>
    <li>
    <span style="font-weight: bold;">subject (required)</span> - 
    The subject of the email message to be sent.
    </li>
    <li>
    <span style="font-weight: bold;">messageBody (required)</span> - 
    The body of the email message. Depending on the value of the contentType
    element this field may contain normal text or it may contain rich 
    content such as HTML.
    </li>
</ul>
<br><br>
The templates support the use of dynamic fields that are populated with 
event-specific information at the time the event occurs. Dynamic fields 
are surround by ## characters and take the form ##<i>FIELD_NAME</i>## where
<i>FIELD_NAME</i> is the name of the dynamic field. Dynamic fields may be used
in the subject or messageBody of a template. Below is a list of supported 
dynamic fields:<br><br>
<table
 style="margin-left: auto; margin-right: auto; text-align: left; width: 639px; height: 138px;"
 border="1" cellpadding="2" cellspacing="0">
  <tbody>
    <tr>
      <th style="vertical-align: top;">Field Name<br>
      </th>
      <th style="vertical-align: top;">Description<br>
      </th>
    </tr>
    <tr>
      <td style="vertical-align: top;">##event##<br>
      </td>
      <td style="vertical-align: top;">A string representation of all the event fields.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##eventType##<br>
      </td>
      <td style="vertical-align: top;">The type of event that occurred<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##eventTimestamp##<br>
      </td>
      <td style="vertical-align: top;">The UTC date and time indicating when the reported event ocurred<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##eventUserLogin##<br>
      </td>
      <td style="vertical-align: top;">The login of the user that triggered the event.
        (NOTE: This may be different that the user that created a reservation originally)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##eventSource##<br>
      </td>
      <td style="vertical-align: top;">The OSCARS component that caused the event. 
        Currently the value may be API, WBUI, or SCHEDULER><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##errorCode##<br>
      </td>
      <td style="vertical-align: top;">An error code identifying an error, if one occurred.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##errorMessage##<br>
      </td>
      <td style="vertical-align: top;">A description of an error, if one occurred.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##reservation##<br>
      </td>
      <td style="vertical-align: top;">A string representation of the reservation the event affects.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##gri##<br>
      </td>
      <td style="vertical-align: top;">The global reservation identifier of the affected reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##startTime##<br>
      </td>
      <td style="vertical-align: top;">The UTC start time of the affected reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##endTime##<br>
      </td>
      <td style="vertical-align: top;">The UTC end time of the affected reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##createdTime##<br>
      </td>
      <td style="vertical-align: top;">The UTC time that the affected reservation was created<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##bandwidth##<br>
      </td>
      <td style="vertical-align: top;">The bandwidth of the affected reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##resvUserLogin##<br>
      </td>
      <td style="vertical-align: top;">The login of the user that created the affected reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##status##<br>
      </td>
      <td style="vertical-align: top;">The status of the affected reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##description##<br>
      </td>
      <td style="vertical-align: top;">The description field of the affected reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##pathSetupMode##<br>
      </td>
      <td style="vertical-align: top;">The path setup mode (timer-automatic or signal-xml) of the affected reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##isExplicitPath##<br>
      </td>
      <td style="vertical-align: top;">A flag ndicating whether the reservation path was explicitly set by the user<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##nextDomain##<br>
      </td>
      <td style="vertical-align: top;">The next domain a reservation traverses beyond the current domain<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##l2Source##<br>
      </td>
      <td style="vertical-align: top;">For layer 2 reservations, the URN of the reservation source<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##l2Dest##<br>
      </td>
      <td style="vertical-align: top;">For layer 2 reservations, the URN of the reservation destination<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##l3Source##<br>
      </td>
      <td style="vertical-align: top;">For layer 3 reservations, the hostname/IP address of the reservation source<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##l3Dest##<br>
      </td>
      <td style="vertical-align: top;">For layer 3 reservations, the hostname/IP address of the reservation destination<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##l3SrcPort##<br>
      </td>
      <td style="vertical-align: top;">For layer 3 reservations, the TCP/UDP port of the source<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##l3DestPort##<br>
      </td>
      <td style="vertical-align: top;">For layer 3 reservations, the TCP/UDP port of the destination<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##protocol##<br>
      </td>
      <td style="vertical-align: top;">For layer 3 reservations, the transport protocol (i.e. TCP or UDP)<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##dscp##<br>
      </td>
      <td style="vertical-align: top;">For layer 3 reservations, the differentiated services code point<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##dscp##<br>
      </td>
      <td style="vertical-align: top;">For MPLS reservations, the burst limit of the reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##lspClass##<br>
      </td>
      <td style="vertical-align: top;">For MPLS reservations, the LSP class of the reservation<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;">##TAG:<i>TAG_NAME</i>##<br>
      </td>
      <td style="vertical-align: top;">
        A special dynamic field for including 
        <span style="font-weight: bold;">user-defined tags</span> identified by 
        <i>TAG_NAME</i> in email messages.
        User-defined tags may be included in the reservation description at creation 
        between square brackets[]. This field is useful for triggering the OSCARS 
        email module to search for tags and include them in other areas of the message, 
        such as the subject. For example, including the dynamic field 
        ##TAG:PRODUCTION CIRCUIT## in a template will search each reservation description 
        for the tag [PRODUCTION CIRCUIT]. If present in the reservation description,
        the string [PRODUCTION CIRCUIT] will be included in the 
        resulting email message at the location of this field in the template. If not
        found, this field will be replaced with an empty string in the email message.
      <br>
      </td>
    </tr>
  </tbody>
</table>
<br><br>
</div>
<br>
<br>
<!--#include virtual="footer.html" -->
<br>
<br>
</body>
</html>
