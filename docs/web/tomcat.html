<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Tomcat/Tomcat install</title>
  <link rel="stylesheet" href="styleSheets/oscars.css" type="text/css">
  <link rel="shortcut icon" href="images/esnet.ico" type="image/x-icon">
</head>
<body>
<!--#include virtual="header.html" -->
<div id="topBar" class="topBar">
<div class="topBarDiv"> &nbsp;
<a href="index.html">home</a> &gt; <a href="dependencies.html">Dependencies</a>
&gt; <a href="tomcat.html">Tomcat Install</a>
</div>
</div>
<h2>Tomcat download and install</h2>
Go to the <a href="http://tomcat.apache.org/download-55.cgi">Apache
Tomcat download site </a>and download the core distribution that
matches your hosting environment. Extract the tar or zip file into the
directory from which you want to run the Tomcat server. Set the
evironment variable CATALINA_HOME to the extracted directory.<br>
e.g. if you untarred apache-tomcat-5.5.26.tar in /usr/local,
CATALINA_HOME should be set to /usr/local/apache-tomcat-5.5.26.<br>
<br>
<h2>Tomcat Configuration</h2>
Complete Tomcat documentation can be found at <a
 href="http://tomcat.apache.org/tomcat-5.5-doc/index.html">Tomcat 5-5
doc.</a> The things you may need to do for OSCARS are itemized below.<br>
<br>
<h3>$CATALINA_HOME/conf</h3>
<ul>
  <li><span style="font-weight: bold;"> server.xml</span> - defines
standalone Tomcat server - service name is
Catalina <br>
  </li>
  <ul>
    <li>the connector elements define the port(s) on which tomcat
will
listen the protocol (http or https), and the location of the keystore
for
https connectors.</li>
    <li>You should enable Tomcat to run https only, as user passwords
are passed to the browser interface. If http is used the passwords are
passed unencrypted. See <a
 href="http://tomcat.apache.org/tomcat-5.5-doc/ssl-howto.html">SSL-howto</a>
for instructions on how to do this.<br>
    </li>
    <ul>
      <li> define a dumper valve here</li>
      <li> define remoteAddrValve here if you wish to limit the sites
that can
access the connector</li>
    </ul>
  </ul>
  <li><span style="font-weight: bold;"> web.xml</span> - defines
default values for servlets for static
resources, e.g. jsp, We used the sample in the distribution but enabled
the SSI filter to enable server includes on all html files as the
OSCARS documentation html pages use server-side includes.<br>
  </li>
  <li><span style="font-weight: bold;"> context.xml</span> - Uncomment
the line&nbsp;&nbsp;&nbsp; &lt;Manager pathname="" /&gt; to not allow
sessions to be saved between Tomcat restarts.<br>
  </li>
  <li><span style="font-weight: bold;"> logging.properties</span> - can
be edited to change some logging levels (see <a href="logging.html">logging
configuration</a> for more on how to customize Tomcat to use log4j)<br>
  </li>
  <li><span style="font-weight: bold;"> tomcat-users.xml </span>- user
names and passwords for access to the
Tomcat administrative web pages</li>
</ul>
<h3>$CATALINA_HOME/common</h3>
Classes and libraries shared by the Tomcat server and all the
webapps.&nbsp;
We added common/classes/log4j.properties and common/lib/log4j.jar and
commons-logging.jar in
order to get Tomcat to do log4j logging. By default it just uses
commons
logging.
<h3>$CATALINA_HOME/shared</h3>
Contains classes and libraries shared by all the webapps but not the
Tomcat server. This has been where we have put files that can't seem to
be found from the axis2.war or the OSCARS.aar. The ant task setupServer
will populate the classes directory and deploylibs will polulate the
lib directory. Currently the contents
are:<br>
<ul>
  <li>classes/repo - files that need to be on the classpath as
repo/&lt;filename&gt; These are files used when OSCARS is forwarding a
request, see <a href="oscarsConf.html#server-client">OSCARS interdomain</a>.
    <ul>
      <li>OSCARS.jks </li>
      <li>rampConfig</li>
      <li>ssl-keystore.jks </li>
      <li>axis2.xml </li>
      <li>modules</li>
      <ul>
        <li>rampart-SNAPSHOT.mar </li>
      </ul>
    </ul>
  </li>
  <li>classes/server
    <ul>
      <li>oscars.key </li>
      <li>oscars.properties </li>
      <li>ciscoSetupL2.xml </li>
      <li>ciscoTeardownL2.xml </li>
      <li>juniperSetupL2.xml </li>
      <li>juniperSetupL3.xml </li>
      <li>juniperStatusL2.xml </li>
      <li>juniperStatusL3.xml </li>
      <li>juniperShowRouteL3.xml</li>
      <li>juniperTeardownL2.xml </li>
      <li>juniperTeardownL3.xml </li>
      <li>idc-topicnamespace.xml</li>
      <li>idc-topicset.xml</li>
      <li>pss.key</li>
      <li>mail_templates</li>
      <li>test.properties</li>
      <li>perfSONAR-LSQuery.xml</li>
      <li>test.properties </li>
    </ul>
  </li>
  <li> lib contains the axis2 and rampart jars</li>
  <li>on some installations it was necessary to copy
dcn-software-suite-0.3/idc/lib/antlr-2.7.6.jar to either shared/lib or
$CATALINA_HOME/webapps/axis2/WEB-INF. ( see <a
 href="faq.html#hql.ast.HqlToken">faq.html </a>)<br>
  </li>
</ul>
<h3>&nbsp;$CATALINA_HOME/webapps</h3>
Contains all the user provided war files. In our case this is
OSCARS.war and
axis2.war. When a war file is put in this directory it will be
automatically deployed by the Tomcat server and its contents will be
extracted into a directory with the name of the war. <br>
Every Tomcat webapp has a WEB-INF/web.xml that defines the service name
and methods.
<h3>$CATALINA_HOME/bin - startup scripts</h3>
<ul>
  <li>startup.sh - we edited to set OSCARS_HOME <br>
and JAVA_OPTS="-Djava.net.preferIPv4Stack=true" to get around a FreeBSD
6.0 / ipv6/ jdk1.5 bug </li>
  <li>catalina.sh - starts the command with output sent to
$CATALINA_HOME/logs/catalina.out </li>
</ul>
<!--#include virtual="footer.html" -->
</body>
</html>
