<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>BSS component</title>
  <link rel="stylesheet" href="styleSheets/oscars.css" type="text/css">
  <link rel="shortcut icon" href="images/esnet.ico" type="image/x-icon">
</head>
<body>
<!--#include virtual="header.html" -->
<div id="topBar" class="topBar">
<div class="topBarDiv"> &nbsp; <a href="index.html">home</a> &gt;
Components &gt; <a href="bss.html">BSS</a>
</div>
</div>
<h1>Bandwidth Scheduling Subcomponent</h1>
<h2>Overview</h2>
<br>
The bandwidth scheduling component is the component that
schedules a reservation. It parses the createReservation request,
checks with the&nbsp;<a href="aaa.html">authorization component</a>
that the user has permission to make the reservation and then hands the
requested path to the <a href="pathfinder.html">pathfinder component</a>
to determine the actual path through the network that will be used. It
then checks to see if the required resources are available during the
requested time interval. If so, it holds those resources and creates a
Global Reservation Identifier (GRI) which will be used to identify the
reservation across domains. If the end
point of the path is not in the local domain, the BSS forwards the
createReservation request to the next domain. The final domain in the
path will create a token, derived from the GRI that can be used to
signal the start of the reservation. If the reservation
is able to sucessfully hold all the resources it needs across all the
downstream domains, the local resources are scheduled and the
reservation is entered into the BSS's reservation table.<br>
<br>
<h2>Configuration</h2>
<br>
When the OSCARS server software is installed, the bss database tables
must be created and populated. There are two sets of tables use by the
scheduling component: those used
to define reservations and those used to define
topology. The topology tables must be populated with topology
information before the OSCARS service can function. See <a
 href="tss.html">TSS Component Notes</a> for details on the topology
tables.<br>
<br>
<h2>Details</h2>
<br>
The createReservation message contains the path that is to be reserved,
the amount of bandwidth to be reserved, the start time for the
reservation, the duration, the burst limit, the purpose of the
reservation and if coming from another domain, the global reservation
identifier. See the <a href="wsdl.html">OSCARS wsdl files</a> for the
precise type of each of these parameters. The input path definition is
very flexible. It can simply be the source and destination host
IP addresses, or can include ingress and egress points for each domain,
or even the hops within domains. It is referred to as a unconfirmed
loose hop path (ULP). At the end of the reservation process a confirmed
loose hop (CLP) is returned to the user where it has been verified that
an acutal path with the requested bandwidth can be made through these
hops.&nbsp; The way the hops are expressed depends on the layer (2 or
3) that is being specified and how the domains specify their
topologies. See the <a href="tss.html#nmwgTopologySchema">NMWG
topology schema</a> for how we identify hops. <br>
<br>
Once the reservation has been added to the reservations table in each
of the transited domains, the circuit can be instantiated either by a
scheduler procces that is triggered by the start time of the
reservation or by a signal message from the user that the data flow is
ready to start. The circuit setup (and subsequent&nbsp; teardown) is
handled&nbsp; by the <a href="pss.html">path realization component</a>.
<br>
<h2>BSS Tables</h2>
<!--==#include virtual="footer.html"--> <span
 style="font-weight: bold;"><br>
</span>There are two classes of tables used by the BSS: ones that
describe the static topology of the local domain and some aspect of
adjacent domains; and ones that describe reservations. The topology
tables are described in <a href="tss.html">TSS Component Notes</a>.
The reseverations table are describe&nbsp; below.<br>
<br>
<h3>Reservation specific tables</h3>
When a reservation is made an entry is created for it in the <span
 style="font-weight: bold;">reservations table</span> containing the
following information:<br>
<pre>
	Integer id                 /** identifier field */
	Long startTime             /** persistant field, secs since 12am, Jan 1, 1970 UTC. */
	Long endTime               /** persistant field, secs since 12am, Jan 1, 1970 UTC */
	Long createdTime           /** persistant field, secs since 12am, Jan 1, 1970 UTC */
	Long bandwidth             /** persistant field */
	String login               /** persistant field: login name of the owner of the reservation */
	String payLoadSender       /** persistant field: login name of the originator of the request */
	String status              /** persistant field */
	String localStatus         /** persistant field */
	String description         /** nullable persistent field */
	String statusMessage       /** nullable persistent field */
	String globalReservationId /** nullable persistent field */
	Token token                /** nullable persistent field, may be used to authorize actions on reservation */<
	Map&lt;String,Path&gt; pathMap   /** persistant field: multiple paths for the reservation */</pre>
The <span style="font-weight: bold;">paths table </span>contains<br>
<pre>
	Integer id                 /** identifier field */
	String pathSetupMode       /** nullable persistent field: by timer or message signal */
	String pathType            /** REQUESTED, LOCAL, INTERDOMAIN */
	Integer priority           /** nullable persistent field */
	Domain nextDomain          /** nullable persistent field */
	String direction           /** nullable persistent field: FORWARD, REVERSE, BIDIRECTIONAL */
	String grouping            /** nullable persistent field */
	List&lt;PathElems&gt; pathElemId /** persistant field: index to first path element */
	Set&lt;Layer2Data&gt; layer2DataSet  /** nullable persistent field: index to layer2Data table */
	Set&lt;Layer2Data&gt; layer3DataIdSet /** nullable persistent field: index to layer3Data table */
	Set&lt;MPLSData&gt; mplsDataSet  /** nullable persistent field: index to mpls table  */</pre>
Explicit is true if the complete path was input; pathSetupMode
specifies if the path will be instantiated automatically by the
scheduler or by a signal from the user; if nextDomain is not
null it is the next
domain on the path, otherwise this is the terminal domain; PathElems
is the list of all the
hop on the path; either layer2Data or layer3Data is set and is the set
of all the layer2 or layer2 elements for this path; if mpls is not null it is
 the set of mpls data elements for this path.
<p>The <span style="font-weight: bold;">pathElems table</span>
contains the following information for each hop
on the path:
</p>
<pre>
        Integer id          /** identifier field */
        Integer seqNum      /** persistant field ; sequence number of hop in path*/
        String urn          /** nullable persistent field: topologyId of element*/
        String userName     /** nullable persistent field */
        Link link           /** persistant field */
        Set&lt;PathElemParam&gt; pathElemParams /** all the PathElemParams for this element */
</pre>
The <span style="font-weight: bold;">layer2Data table </span>contains
the endpoints for a layer 2 reservation.
<pre>
	Integer id             /** identifier field */
	String srcEndpoint     /** persistant field: URN topology id */
	String destEndpoint    /** persistant field: URN topology id */</pre>
and <span style="font-weight: bold;">layer3Data table</span> contains
the endpoints for a layer 3 reservation.
<pre>
	Integer id             /** identifier field */
	String srcHost         /** persistant field: dotted ip address */
	String destHost        /** persistant field: dotted ip address */
	Integer srcIpPort      /** nullable persistent field */
	Integer destIpPort     /** nullable persistent field */
	String protocol        /** nullable persistent field */ 
	String dscp            /** nullable persistent field */ </pre>
<span style="font-weight: bold;">MplsData table</span> contains the burstLimit 
and lspClass associated with a Path.
<pre>
 	Integer id            /** identifier field */
 	Long burstLimit       /** persistent field */
 	String lspClass       /** persistent field */ </pre>
The <span style="font-weight: bold;">tokens table</span> contains an
opaque identifier associated with each reservation that may be used to authorize actions on the reservation.<br>
<pre>	Integer id            	/** identifier field */  <br>	Integer reservationId 	/** persistant field */ <br>	String value         	/** persistant field */ </pre>
<span style="font-weight: bold;">idSequence table&nbsp; </span>a
sequence of integers<br>
<pre>	Integer id            	/** identifier field */ </pre>
Used to assign the numeric part of the next GRI. Ensures that
reservation ids will never be reused.<br>
<br>
<br>
<!--#include virtual="footer.html" -->
</body>
</html>
