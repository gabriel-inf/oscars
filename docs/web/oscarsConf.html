<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Axis configuration</title>
  <link rel="stylesheet" href="styleSheets/oscars.css" type="text/css">
  <link rel="shortcut icon" href="images/esnet.ico" type="image/x-icon">
</head>
<body>
<!--#include virtual="header.html" -->
<div id="topBar" class="topBar">
<div class="topBarDiv"> &nbsp;
<a href="index.html">home</a> &gt; <a href="install.html">Install
OSCARS</a>
&gt; <a href="oscarsConf.html">OSCARS Configuration</a>
</div>
</div>
<h2>OSCARS Configuration</h2>
<span style="font-weight: normal;">You will need to modify
the files that are located in conf/axis-tomcat for your
users. Once you have modified them you should copy them to a domain
specific directory, and set the environment variable DOMAIN_HOME to
point to them. If $DOMAIN_HOME is set, the ant task setupServer will
copy the files from there rather than the conf/axis-tomcat. Also when you
update to a newer distribution of OSCARS your changes won't be lost.</span><br>
<h3>Server</h3>
<ul>
  <li><b>OSCARS-services.xml,notify-services.xml</b>
are generated by WSDL2Java and specify all the methods and their
parameters of the respective service.
The ws-security-policy specification for message security is included
in this file. It also imports rampConfig.xml for the Rampart specific parts of
the security policy. Located
in the distribution at conf/axis-tomcat. Copied to OSCARS.aar/META-INF/. </li>
  <li><b>rampConfig.xml</b> names the keystore file and has its
password. Located in the distribution in conf/axis-tomcat. Copied
to $CATALINA_HOME/shared/server/classes/repo.<br>
  </li>
  <li><b>OSCARS.jks</b>
is the keystore that is used to
verify signed messages. It needs to contain the trustedCACerts for
the issuers of any user who will submit a signed message and a keyEntry
for the server to sign responses and forward messages to other
IDCs. Located in
the distribution in conf/axis-tomcat. Copied to
$CATALINA_HOME/shared/server/classes/repo.</li>
  <li><b>ssl-keystore.jks </b>- has
the trustedCACert for the ssl
certificate of the Tomcat server that hosts the oscars services to which this service may 
forward messages. Located in the distribution in conf/axis-tomcat. Copied to
$CATALINA_HOME/shared/server/classes/repo.</li>
<br>
  <li><b>Files copied from OSCARS to axis2</b></li>
  <ul>
    <li>conf/logging/axis2.log4j.properties is copied to
webapps/axis2/classes/log4j.properties</li>
    <li>classes/net/es/oscars/client/security/PWCallback.class copied
to webapps/axis2/WEB-INF/net/es/oscars/client/security/PWCallback.class<br>
    </li>
  </ul>
</ul>
<p style="font-weight: bold;">Client</p>
See <a href="msgSecurity.html">Security
Reference</a> for more
details about these files.<br>
<ul>
  <li><b>axis2.xml</b> - needed when
signing messages. It contains:</li>
  <ul>
    <li>InFlow and OutFlow parameters</li>
    <li>Imports rampConfig.xml <br>
    </li>
  </ul>
  <br>
The axis2.xml file can be found by the client code from a
javavm flag -daxis2.xml=&lt;filename&gt; <br>
or can be set programatically by <br>
  <pre>ConfigurationContext configContext = <br>		ConfigurationContextFactory.createConfigurationContextFromFileSystem(repo, null);<br>ServiceClient serviceClient = new ServiceClient(configContext, null)</pre>
Where <b>repo</b> is a directory on the classpath that contains an
axis2.xml file.<br>
  <br>
The repo directory also contains: <li><b>rampConfig.xml</b> contains:</li>
    <ul>
      <li>alias for the user who is sending the messages<br>
      </li>
      <li>org.apache.ws.security.crypto.provider=org.apache.ws.security.components.crypto.Merlin
      </li>
      <li>org.apache.ws.security.crypto.merlin.keystore.type=jks </li>
      <li>org.apache.ws.security.crypto.merlin.keystore.password=password
      </li>
      <li>org.apache.ws.security.crypto.merlin.file=OSCARS.jks (name
of keystore file)</li>
    </ul>
  <br>
  <li><b>OSCARS.jks </b>contains</li>
  <ul>
    <li>keyEntry for the user specified in axis2.xml to be signing the outgoing messages</li>
    <li>trustedCACerts for the issuer of this user's certificate </li>
  </ul>
  <br>
  <li><b>ssl-keystore.jks </b>- has
the TrustedCACert for the ssl
certificate of the Tomcat server that hosts the oscars services to which the client will be
connecting </li>
</ul>
<!--#include virtual="footer.html" -->
</body>
</html>
