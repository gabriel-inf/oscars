<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Installing OSCARS</title>
  <link rel="stylesheet" href="styleSheets/oscars.css" type="text/css">
  <link rel="shortcut icon" href="images/esnet.ico" type="image/x-icon">
</head>
<body>
<!--#include virtual="header.html" -->
<div id="topBar" class="topBar">
<div class="topBarDiv"> &nbsp; <a href="index.html">home</a> &gt; <a
 href="install.html">Installing OSCARS</a>
</div>
</div>
<h1 align="center"><a class="mozTocH1" name="mozTocId574198"></a>Installing
OSCARS</h1>
<table style="margin-top: 10px;" cellspacing="5" width="95%">
  <tbody>
    <tr>
      <td valign="top"> <br>
      <br>
      <br>
<!--#include virtual="installMenu.html" --> <br>
      </td>
      <td valign="top">
      <ol id="mozToc">
<!--mozToc h1 1 h2 2 h3 3 h4 4 h5 5 h6 6--><li><a href="#mozTocId574198">Installing
OSCARS</a>
          <ol>
            <li><a href="#mozTocId718113">Hardware requirements</a></li>
            <li><a href="#mozTocId694638">Software Prerequisites</a></li>
            <li><a href="#mozTocId277748">Download OSCARS</a></li>
            <li><a href="#mozTocId995497">Setting-up the MySQL Database</a></li>
            <li><a href="#mozTocId382019">Quick Start</a></li>
            <li><a href="#mozTocId427254">Creating OSCARS users </a></li>
            <li><a href="#mozTocId78259">Setting up Server Keystores</a></li>
            <li><a href="#mozTocId660439">Setting up Client Keystores</a></li>
            <li><a href="#mozTocId718338">Description of major tasks in
the build process </a></li>
          </ol>
        </li>
      </ol>
      <h2><a class="mozTocH2" name="mozTocId718113"></a><a
 name="HardwareReq"></a>Hardware requirements</h2>
      <br>
The OSCARS IDC software requires a single PC that will act as a web
server for processing requests. Most modern PCs should be suitable for
running the software. The following specifications are the minimum
requirements for most installations:<br>
      <ul>
        <li>1Ghz Processor, 1GB memory</li>
        <li>Linux/Unix Operating System (including MacOSX)<br>
        </li>
        <li>Basic Internet connectivity</li>
        <li>System clock running the Network Time Protocol (NTP)</li>
        <li>Access to a mail server to send mail<br>
        </li>
      </ul>
The IDC listens for http on port 8080 and https on port 8443 by default.<br>
      <br>
      <h2><a class="mozTocH2" name="mozTocId694638"></a>Software
Prerequisites</h2>
      <br>
The OSCARS software is written in Java 5.0 and depends on the following
Java packages. <br>
      <ul>
        <li><a href="javaPkgs.html#java">Java 5.0 or later</a><br>
        </li>
        <li><a href="javaPkgs.html#log4j">Log4j</a> -
logging libraries (included in the distribution)<br>
        </li>
        <li><a href="javaPkgs.html#ant">Ant 1.7</a> - Java build
tool</li>
        <li><a href="javaPkgs.html#jta/">Java
Transaction API
(JTA) 1.0.1</a> Used by hibernate for managing transactions<br>
        </li>
        <li><a href="database.html">Hibernate</a> - database
libraries&nbsp; (included in the distribution)<br>
        </li>
        <li><a href="jsPkgs.html#dojo">Dojo </a>-
Javascript
toolkit library used by our new browser interface</li>
        <li><a href="tomcat.html">Apache Tomcat 5.5</a>
servlet
container</li>
        <li><a href="axis2.html">Apache Axis2 1.4.1 </a>Web
service container</li>
        <li><a href="axis2.html">Apache
Rampart 1.4/SNAPSHOT </a>- for Web service message security</li>
      </ul>
The persistent data for
reservations, topology and user information is stored in <a
 href="database.html">MySQL</a> tables so MySQL 4.1.2 or later
must be installed.<br>
      <br>
Click through the links above for details on how to install and
configure
these packages. The <a href="DCN-SUITE-OSCARS-INSTALL.pdf">DCN-Dragon-Suite
Installation
Manual</a> also covers installation of these packages in section 1 and
2.<br>
      <br>
There are several shell scripts included in the distribution: <span
 style="font-weight: bold; font-style: italic;"><br>
      </span>
      <ul>
        <li><span style="font-weight: bold; font-style: italic;">do_build.sh</span>
which will check for prerequsites,&nbsp; download axis2 and rampart if
they are&nbsp; missing. build and deploy axis2.war, create and populate
the databases and build a properly
configured axis2.war file.<br>
        </li>
        <li><span style="font-weight: bold;">do_install.sh</span> which
is run after do_build and sets some OCSARS configuration variables in
the deployed axis2, installs the OSCARS keystores, deploys the
OSCARS.war, OSCARS.aar and OSCARSNotify.aar, and builds the tools/utils
directory.<br>
        </li>
        <li><span style="font-weight: bold;">do_upgrade.sh</span> which
will upgrade a DCN release 0.3 to 0.4. It will update the</li>
        <li>version of axis2 to 1.4.1, update OSCARS security
configuration and keystores and update the mysql data bases.<br>
        </li>
      </ul>
      <h2><a class="mozTocH2" name="mozTocId277748"></a>Download
OSCARS</h2>
      <br>
See the <a href="download.html">Download</a> page for instructions on
how to download the OSCARS source code from either the code repository
or from a tar file. <br>
      <br>
The distribution includes the OSCARS IDC code; a suite of test
programs; a set of example Web Service client programs; a tools
directory that includes a stand-alone scheduler program, some topology
updating tools, a monitoring script that checks that the service is
responding,&nbsp; a script to do sanity checks on the databases;
complete documentation including the JavaDoc and configuration files.<br>
      <br>
      <h2><a class="mozTocH2" name="mozTocId995497"></a>Setting-up the
MySQL Database</h2>
      <br>
If you let <span style="font-style: italic; font-weight: bold;">do_build.sh</span>
install
your databases it will do the following things: <br>
      <br>
Prompt you for the privileged user and its password. (this should be
the user and password that you set when you <a
 href="database.html#initalAct">installed MySQL</a>). It will use this
to connect to your mysql server.<br>
      <br>
Prompt you for the name and password of the user that will be used by
the IDC software to connect to the database. This&nbsp; name and
password must match what you put in the oscars.properties file as
hibernate.connection.username and password.<br>
      <br>
Create databases named <span style="font-style: italic;">aaa, bss,
notify, testaaa</span> and <span style="font-style: italic;">testbss</span>,
create the IDC user if it does not already exist, and grant it "<code>ALL
PRIVILEGES" <span style="font-family: verdana,arial,sans-serif;">on
the five databases. Initialize the aaa database with standard
permissions, attributes and resources.</span></code><br>
      <br>
Do not confuse these two mysql users with the OSCARS users that you
will be creating later. These users should have access to mysql only
from localhost. The access control on these users is completely
separate from that of the OSCARS users, so in order to preserve the
integrity of the OSCARS system, the number of mysql users should be
strictly limited to system administrators.<br>
      <br>
If you do not want to have do_build.sh create your databases&nbsp; you
can say no to the "Install databases" prompt and use the following
commands instead.<br>
      <br>
      <span style="font-weight: bold;">Creating the aaa Database</span><br>
The aaa database contains authentication, authorization, and accounting
information. This includes user accounts and attributes. To create the
database and populate it with some sample values, issue these commands:<br>
      <br>
      <div style="margin-left: 40px;"><code style="font-weight: bold;">cd
sql/aaa</code><br style="font-weight: bold;">
      <code style="font-weight: bold;">mysql &#8211;u root &#8211;p &lt;
populateDefaults.sql</code><br>
      <code></code></div>
      <br>
This creates the aaa database and tables populated with the
institutions, permissions, resources
and attributes expected by the aaa component. <br>
      <br>
If you want to create empty tables use the <span
 style="font-style: italic;">sql/aaa/createTables.sql </span>script.<br>
      <br>
      <span style="font-weight: bold;">Creating the bss Database</span><br>
The Bandwidth Scheduling Subcomponent (BSS) reserves and manages
network resources. The bss contains the list of reservations and enough
local topology information to track the resources in use by those
reservations. To create the database and a set of empty tables, issue
these commands:<br>
      <br>
      <div style="margin-left: 40px;"><code style="font-weight: bold;">cd
sql/bss</code><br style="font-weight: bold;">
      <code style="font-weight: bold;">mysql &#8211;u root &#8211;p &lt;
createTables.sql</code><br>
      </div>
      <br>
Do not run this command after you have added any topology to the
database as it deletes all the existing tables and starts over. If you
wish to just delete information about reservations use the
cleanReservations.sql script.<br>
      <br>
      <span style="font-weight: bold;">Creating the notify Database</span><br>
The notification server handles the notifications about reservation
state changes between different IDCs and users. It&nbsp; keeps a
database of event publishishers, subscriptions and subscription
filters. To create the database adn a set of empty tables&nbsp; issue
these commands:<br>
      <br>
      <div style="margin-left: 40px;"><span style="font-weight: bold;">cd
sql/notify;</span><br style="font-weight: bold;">
      <span style="font-weight: bold;">mysql -u root -p &lt;
createTables.sq</span>l<br>
      </div>
      <br>
      <br>
      <span style="font-weight: bold;">Creating and granting access to
a user for the IDC</span><br>
      <br>
      <code>shell&gt; <strong>mysql -u root</strong><br>
mysql&gt; <strong>GRANT ALL PRIVILEGES ON aaa.* TO '<italic
 style="font-style: italic;">user-name</italic>'@'localhost' IDENTIFIED
BY '<italic style="font-style: italic;">password</italic>';</strong><br>
mysql&gt; <strong>GRANT ALL PRIVILEGES
ON bss.* TO '<span style="font-style: italic;">user-name</span>'@'localhost'
IDENTIFIED BY '<span style="font-style: italic;">password</span>'; </strong><br>
      <br>
      </code><a name="editProperties"></a>Once the IDC user has been
added to the database either by do_build.sh or manually you must edit
the file <span style="font-weight: bold; font-style: italic;">examples/server/oscars.properties</span><span
 style="font-weight: bold;"></span> to set the
hibernate.connection.username and hibernate.connection.password to the
user and password that were given for the IDC user.<br
 style="font-weight: bold; font-style: italic;">
      <br>
      <h2><a class="mozTocH2" name="mozTocId382019"></a><a
 name="quickStart"></a>Quick Start</h2>
      <br>
If&nbsp; you have installed Tomcat, Ant, jta.jar and MySQL, you can run
the <span style="font-weight: bold; font-style: italic;">do_build.sh</span>
script;<br>
      <br>
It will check the installation of the items listed above, download and
install axis2 with rampart if needed, setup the databases and compile
the distribution.<br>
      <br>
Once do_build has completed building the tools and exited, you can try
the following:&nbsp; start the Tomcat
server using<br>
      <br>
$CATALINA_HOME/bin/startup.sh <br>
      <br>
and use your browser to connect to<br>
      <br>
      <span style="font-style: italic;">https://localhost:8443/</span>
and/or <span style="font-style: italic;">http://localhost:8080/</span><br>
      <br>
which should show you a Tomcat page. Clicking on the status button, and
giving it the Tomcat manager account and password that you set in
$CATALINA_HOME/conf/tomcat-users.xml should bring up a page that lets
you choose to list applications. Clicking on that should show axis2 as
one of the services. Clicking on that should give you an axis2 welcome
page. <br>
      <br>
At this point you can make a test deployment of OSCARs using the
example users and credentials that are in the conf/examples directory
or you can start setting up access for your real users.<br>
      <br>
To do the former:<br>
Run the <span style="font-weight: bold; font-style: italic;">do_install.sh</span>
command and answer yes to the question about copying keyfiles and
configuration files.<br>
      <br>
If this suceeds OSCARS should appear on the list of axis2 services and
you should be able to connect to https://localhost:8443/OSCARS and see
the OSCARS login page.<br>
      <br>
You should also be able to run<br>
      <br>
&nbsp;&nbsp;&nbsp; <code style="font-weight: bold;">ant test -Dt=aaa;</code><br
 style="font-style: italic; font-weight: bold;">
      <br>
and see <br>
&nbsp;&nbsp; [testng] aaa.suite<br>
&nbsp;&nbsp; [testng] Total tests run: 28, Failures: 0, Skips: 0<br>
      <br>
At this point you need to setup your local users and import your local
network topology before you can start making reservations.<br>
      <h2><a class="mozTocH2" name="mozTocId427254"></a>Creating OSCARS
users <br>
      </h2>
      <br>
Begin by creating a domain specific directory with two subdirectories:
server and client.<br>
      <br>
Copy all the files in conf/examples/ to the new directories and set the
environment variable <span style="font-weight: bold;">DOMAIN_HOME</span>
to point to it. <br>
      <br>
Edit the $DOMAIN_HOME/server/oscars.properties to change <span
 style="font-weight: bold; font-style: italic;">aaa.salt</span> before
you add any users.<br>
      <br>
use <span style="font-weight: bold; font-style: italic;">ant
setupServer</span> to copy the new files to $CATALINA_HOME<br>
      <br>
Use the <span style="font-weight: bold; font-style: italic;">tools/utils/idc-useradd</span>
command to add a privileged OSCARS user.&nbsp; <br>
      <code>&nbsp;&nbsp;&nbsp; cd tools/utils</code><br>
      <code>&nbsp;&nbsp;&nbsp; ant&nbsp;</code> (will build the tools)<br>
      <code>&nbsp;&nbsp;&nbsp; ./idc-useradd<br>
      </code><br>
The login field will be the user's primary identification and can not
be changed later, all the other fields can be modified after the user
has been created. The Cert Subject and Cert Issuer can be left blank
for
now. Select the OSCARS-engineer and OSCARS-administrator roles.<br>
      <br>
If you use this login name to login to the OSCARS web page you will be
able to use the browser interface to create more users and eventually
to create resesrvations.<br>
      <br>
      <h2><a class="mozTocH2" name="mozTocId78259"></a>Setting up
Server Keystore</h2>
      <br>
In order to make interdomain reservations or to use the SOAP api from
the comand line clients in the examples directory, the OSCARS.jks
keystore must have a keyEntry for the service.&nbsp; It is recommended
that you read the <a href="msgSecurity.html">message
security page</a> for an general explantion of the various keystores
and configuration files that are site specific. The ant task
setupServer promted for the alias of the service . Now you
must add a KeyEntry for this service user who will sign response
message
and forwarded messages.<br>
      <br>
You can add a user KeyEntry to the keystore in several ways. If you are
running a standalone server, use<span style="font-weight: bold;"> <a
 href="msgSecurity.html#idcCommands">tools/utils/idc-certadd</a></span>
and chose option 1. This
will create a keyEntry with the alias you give and a self-signed
certificate. If you are going to be connected to the Internet2 or ESnet
IDC's you will need a certificate that is signed by a trusted CA. Use
icd-certadd and chose option 2 which will add a keyEntry and also
generate a certificate signing request that can be sent to a trusted CA.<br>
      <br>
      <h2>Setting
up Client Keystores</h2>
      <span style="font-weight: bold;"><br>
      </span>If you wish to use the command line clients in
examples/javaClients you<br>
will&nbsp; need to setup the keystore there.<br>
      <br>
      <div style="margin-left: 40px;"><code>cd examples/javaClients</code><br>
      <code>ant </code><br>
      </div>
      <br>
Will copy and edit the axis2.xml and rampConfig.xml files into
examples/javaClients/repo. If you answered y to the question<br>
      <br>
      <span style="font-style: italic;">Do you wish to use the
rampConfig.xml in the repo subdirectory in axis2.xml to be able to
customize the user key (as opposed to using the default ? (y,n)<br>
      <br>
      </span>you will need to add a keyEntry to repo/OSCARS.jks. If you
answered no, the clients will use the same keystore that the server
uses.<br>
      <br>
      <span style="font-style: italic;"></span><span
 style="font-weight: bold;"></span>
      <h2><a class="mozTocH2" name="mozTocId718338"></a><a
 name="antTasks"></a>Description of
major tasks in the build process<br>
      </h2>
      <span style="font-style: italic;"></span> <span
 style="font-style: italic;"></span><br>
      <span style="font-style: italic;">prepare</span> copies axis2 and
tomcat libraries from the Tomcat deployed area, $CATALINA_HOME, into
the distribution's lib directory, and the msql-connector jars from a
maven
repository.&nbsp; It also copies some configuration files from the conf
directory to the build area, from whence they will be put in the aar
and
war files.<br>
Normally called by the <span style="font-style: italic;">compile</span>
task.<br>
      <span style="font-style: italic;"><br>
wsdl2java </span>checks to see if the web service stubs have been
generated from the OSCARS.wsdl and if not runs the axis2 WSDL2Java
program to generate them. The
resulting Java files are put in src/net/es/oscars/wsdlTypes and
src/org/ogf/schema/network/topology/ctrlplane/_20070626<br>
      <br>
      <span style="font-style: italic;">compile</span> depends on <span
 style="font-style: italic;">prepare</span> and <span
 style="font-style: italic;">wsdl2java<br>
      </span>compiles all the server classes into build/WEB-INF/classes.<br>
      <br>
      <span style="font-style: italic;"></span> <span
 style="font-style: italic;">aar</span> ceates the
build/OSCARS.aar file from the classes in build/WEB-INF/classes
(excluding
the servlet classes),&nbsp; the jars in the lib directory and the wsdl,
xsd and services.xml files in conf/server.<br>
      <br>
      <span style="font-style: italic;">deployaar</span>&nbsp; copies
OSCARS.aar to $CATALINA_HOME/webapps/WEB_INF/services, the
log4j.properties file to $CATALINA_HOME/webapps/WEB_INF/classes where
axis2 can find it, and a couple of jar files that need to be in
$CATALINA_HOME/shared/lib.<br>
      <span style="font-style: italic;"></span><br>
      <span style="font-style: italic;">wbui</span> generates the
JavaDocs
for all the IDC classes and for just the client side classes. It copies
all the static docs into the web/docs directory from which they are
included in the OSCARS.war. It then builds the war from the classes in
build/WEB-INF/classes (excluding the web services classes), the lib
jars and the docs.<br>
      <br>
      <span style="font-style: italic;">deploywbui</span>&nbsp; depends
on <span style="font-style: italic;">wbui, compile,</span> and <span
 style="font-style: italic;">copydocs</span><br>
It just copies
the
OSCARS.war file to $CATALINA_HOME/webapps. If Tomcat is running at the
time of the deploy and is configured to dynamically deploy services,
the new war will immediately be deployed. If Tomcat is not running, you
may need to delete the old deployed directory
$CATALINA_HOME/webapps/OSCARS before the new war will be started.<br>
      <br>
      <span style="font-style: italic;">setupServer</span> copies a
number of
files to the $CATALINA_HOME/shared area where they are used by axis2
and rampart. We also have our own version of log4j.properties which we
put in $CATALINA_HOME/common/classes for use by Tomcat. <span
 style="font-style: italic;">setupServer</span> only needs to be run
once per installation unless you change any of the copied
configuration files.<br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><br>
      </td>
      <td style="vertical-align: top;"><br>
      </td>
    </tr>
  </tbody>
</table>
<!--#include virtual="footer.html" -->
<br>
<br>
</body>
</html>
