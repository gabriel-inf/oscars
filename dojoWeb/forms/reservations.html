<html>
<head>
<script type="text/javascript">
    var resvView = {
      cells: [[
         {name: 'GRI', field: "gri", width: "9em"},
         {name: 'User', field: "login", width: "11em"},
         {name: 'Start Time', field: "startTime", width: "11em"},
         {name: 'End Time', field: "endTime", width: "11em"},
         {name: 'Status', field: "status", width: "9em"},
         {name: 'Origin', field: "origin", width: "28"},
         {name: 'Destination', field: "destination", width: "28"}
      ]]
    };
    var resvLayout = [ resvView ];
</script>
</head>

<p>The reservations returned can be constrained by their status, text in
their description, times that they end after or start before, and topology
identifiers that they contain in their path.  Times given are in the
time zone of the browser.  Click on the GRI link to view detailed
information about a reservation.</p>

<form id="reservationListForm" method="POST">

<input type="hidden" name="startTimeSeconds" id="startTimeSeconds" />
<input type="hidden" name="endTimeSeconds" id="endTimeSeconds" />

<table>
<tr>
  <td>
  <button dojoType="dijit.form.Button" id="refreshReservationList">
     Refresh 
     <script type="dojo/method" event="onClick">
        oscars.Form.refreshResvGrid();
    </script>
  </button>
  </td>

  <td>Statuses:
  <select name="statuses" multiple="multiple">
      <option value="ACTIVE" selected="selected">ACTIVE</option>
      <option value="PENDING" selected="selected">PENDING</option>
      <option value="FINISHED">FINISHED</option>
      <option value="CANCELLED">CANCELLED</option>
      <option value="FAILED">FAILED</option>
      <option value="INVALIDATED">INVALIDATED</option>
  </select>
  </td>

  <td>Description:
  <input name="resvDescription" id="resvDescription"
       dojoType="dijit.form.TextBox"
       promptMessage="Search by reservation description" />
  </td>

  <td>
    <input type="reset" value="Reset form fields"></input>
  </td>
</tr>
<tr>
  <td>Ending after:
    <input dojoType="dijit.form.DateTextBox" name="startDateSearch"
               id="startDateSearch" />MM/DD/YY</td>

  <td>Time:
    <input dojoType="dijit.form.ValidationTextBox" name="startTimeSearch"
             id="startTimeSearch"
             regExp="[0-2]?[\d]:[0-5][\d]"
             promptMessage="Enter the time portion of the date in format HH:MM"
             invalidMessage="Invalid format:  use HH:MM" />HH:MM</td>

  <td>Starting before:
    <input dojoType="dijit.form.DateTextBox" name="endDateSearch"
               id="endDateSearch" />MM/DD/YY</td>

  <td>Time:
    <input dojoType="dijit.form.ValidationTextBox" name="endTimeSearch"
             id="endTimeSearch"
             regExp="[0-2]?[\d]:[0-5][\d]"
             promptMessage="Enter the time portion of the date in format HH:MM"
             invalidMessage="Invalid format:  use HH:MM" />HH:MM</td>
  <td>
    <textarea name="linkIds" id="linkIds" dojoType="dijit.form.Textarea">
    </textarea>
  </td>
</tr>
</table>
</form>

<br/>

<!-- store and model declarations need to have the correct syntax, but the
     declarations themselves are not currently sufficient -->
<div id="reservationStore" dojoType="dojo.data.ItemFileReadStore"
    jsId="reservationStore" url="servlet/ListReservations">
</div>
<div id="reservationModel" dojoType="dojox.grid.data.DojoData"
     jsId="reservationModel"
     rowsPerPage="20" store="reservationStore" query="{ gri: '*' }">
</div>
<div id="resvGrid" dojoType="dojox.Grid" model="reservationModel"
     jsId="thisReservationGrid" structure="resvLayout">
</div>

</html>
