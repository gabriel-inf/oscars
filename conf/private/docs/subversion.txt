Notes on using Subversion

Merging revisions from a branch into the trunk

You may want to merge all the changes on the branch or just the changes within
a single directory. There does not seem to be a way to just merge a single file.

1.  Make sure you have a clean copy of the trunk or at least the directory in which your
    changes reside

           % cd <Trunk Working Directory> or subdirectory
           % svn status

    should show nothing. e.g no <filename>

    
2.  Check when the last revision to the trunk/directory was made

           % svn info

    returns trunkrevnumber as "Last Changed Rev"


3.  The svn merge command we are using is

           % svn merge sourceURL1[@N] sourceURL2[@M] [WCPATH]

    The source URLs are specified at revisions N and M.  These are the two sources to be compared.
    The differences are merged into the WCPATH which is your trunk working directory and defaults to ".".
    The revisions default to HEAD if omitted. In our examples the M defaults to the HEAD. For example:

    3a. To merge the entire branch

           % svn merge https://oscars-test.es.net/repos/oscars/branches/java/@4691 \
                 https://oscars-test.es.net/repos/oscars/branches/java/

    3b. To merge just the files in the docs directory

           % cd docs
           % svn merge https://oscars-test.es.net/repos/oscars/branches/java/docs/@4691 \
                 https://oscars-test.es.net/repos/oscars/branches/java/docs/


4.  For complicated merges, do a dry run, and save the resulting list.
    It may be long and you may need it to find conflicts.

           % svn merge --dry-run https://oscars-test.es.net/repos/oscars/branches/java/@4691 \
                 https://oscars-test.es.net/repos/oscars/branches/java/ > ~/svn.list

    To do the actual merge from the branch (in this case branches/java) to your working directory

           % svn merge https://oscars-test.es.net/repos/oscars/branches/java/@4691 \
                 https://oscars-test.es.net/repos/oscars/branches/java/

    Note that no changes have been made to the repository yet.

    Check for any conflicts, these will be marked by a 'C' before the filename.
    In this example, validator.js has a conflict that we will have to manually
    resolve

             U    web/index.html
             C    web/js/validator.js

    After resolving this conflict do:

           % svn resolved web/js/validator.js

    Then, test with a deploy of the aar and war files on the server.


5.  Commit the changes in the working copy of the trunk

           % svn commit
