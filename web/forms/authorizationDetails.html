<html>
<head>
    <script type="text/javascript">
        dojo.connect(dijit.byId("authDetailsPane"), "onLoad",
                     oscars.AuthorizationDetails.init);
    </script>
</head>

<body>
<form id="authDetailsForm" dojoType="dijit.form.Form">
<span id="modifyAuthorizationDisplay" style="display:none">
<p>Any legal authorization can be added to any attribute.  Note that if you
change the attribute associated with an existing authorization, you are
deleting the authorization associated with the old attribute.
The best way to modify an
authorization is to start from the resources menu and
work down.  What resource is chosen determines which permissions can be
chosen, and so on down to constraints.  Constraints are optional for all
combinations of resources and permissions.  If a permission is changed before
a resource, it may be reset to None if it is not valid for that resource.
You can click on RESET TO ORIGINAL at any time to restore the original
attribute/authorization combination.
</p>
  <button dojoType="dijit.form.Button" id="modifyAuthorization">
     MODIFY
     <script type="dojo/method" event="onClick">
         oscars.AuthorizationDetails.postModify();
     </script>
  </button>
  <button dojoType="dijit.form.Button" id="cloneAuthorization">
     CLONE
     <script type="dojo/method" event="onClick">
         oscars.AuthorizationDetails.clone();
     </script>
  </button>
  <button dojoType="dijit.form.Button" id="deleteAuthorization">
      DELETE
      <script type="dojo/method" event="onClick">
         oscars.AuthorizationDetails.postDelete();
      </script>
  </button>
  <button dojoType="dijit.form.Button" id="resetOriginalAuthorization">
     RESET TO ORIGINAL
     <script type="dojo/method" event="onClick">
         oscars.AuthorizationDetails.resetFields(true);
     </script>
  </button>
  </span>
  <span id="addAuthorizationDisplay">
<p>Any legal authorization can be added to any attribute.  An attribute can
be chosen at any time.  For the other options, the best way to add an
authorization is to start from the resources menu and
work down.  What resource is chosen determines which permissions can be
chosen, and so on down to constraints.  Constraints are optional for all
combinations of resources and permissions.  If a permission is chosen before
a resource, it may be reset to None if it is not valid for that resource.
</p>
  <button dojoType="dijit.form.Button" id="addAuthorization">
     ADD
     <script type="dojo/method" event="onClick">
         oscars.AuthorizationDetails.postAdd();
     </script>
  </button>
  <button dojoType="dijit.form.Button" id="clearAuthorization">
     CLEAR
     <script type="dojo/method" event="onClick">
         oscars.AuthorizationDetails.resetFields(false);
     </script>
  </button>
  </span>

  <input type="hidden" name="oldAuthAttributeName" id="oldAuthAttributeName" />
  <input type="hidden" name="oldResourceName" id="oldResourceName" />
  <input type="hidden" name="oldPermissionName" id="oldPermissionName" />
  <input type="hidden" name="oldConstraintName" id="oldConstraintName" />

<table width="50%">
<tbody>
  <tr>
    <!-- setting once sets for all in column -->
    <td width="12%">Attribute</td>
    <td colspan="2">
        <select name="authAttributeName" id="authAttributeName">
        </select>
    </td>
    <td>
        &nbsp;
    </td>
  </tr>
  <tr>
    <td>Resource</td>
    <td colspan="2">
        <select name="resourceName" id="resourceName"
        </select>
    </td>
    <td>
      <button dojoType="dijit.form.Button" id="resourceOK">
         RESOURCE OK
         <script type="dojo/method" event="onClick">
             oscarsState.authorizationState.constrainChoices('resourceName');
         </script>
      </button>
    </td>
  </tr>
  <tr>
    <td>Permission</td>
    <td colspan="2">
        <select name="permissionName" id="permissionName"
        </select>
    </td>
    <td>
      <button dojoType="dijit.form.Button" id="permissionOK">
         PERMISSION OK
         <script type="dojo/method" event="onClick">
             oscarsState.authorizationState.constrainChoices('permissionName');
         </script>
      </button>
    </td>
  </tr>
  <tr>
    <td>Constraint</td>
    <td colspan="2">
        <select name="constraintName" id="constraintName"
            onChange="oscarsState.authorizationState.constrainChoices('constraintName');return false;">
        </select>
    </td>
    <td>
        &nbsp;
    </td>
  </tr>
  <tr>
    <td>Constraint value</td>
    <td>
      <input type="text" name="constraintValue" id="constraintValue"
             dojoType="dijit.form.TextBox"
             promptMessage="Enter the constraint value" />
    </td>
    <td id="constraintType">
    </td>
  </tr>
</tbody>
</table>
</form>
<!-- tooltip section for buttons -->
<!-- currently a bug in Dojo where tooltip stays displayed on new page
<div dojoType = "dijit.Tooltip" connectId="addAuthorization" position="above">
    Adds a new authorization with the current values.
</div>
-->
<div dojoType = "dijit.Tooltip" connectId="clearAuthorization" position="above">
    Clears all parameters to none.
</div>
<!--
<div dojoType = "dijit.Tooltip" connectId="modifyAuthorization" position="above">
    Modifies the authorization.
</div>
<div dojoType = "dijit.Tooltip" connectId="deleteAuthorization" position="above">
    Deletes the selected authorization.
</div>
-->

<div dojoType = "dijit.Tooltip" connectId="resetOriginalAuthorization" position="above">
    Resets all authorization parameters to their original values.
</div>
</body>
</html>
