<html>
<head>
<script type="text/javascript">
    function postLogin() {
        var valid = dijit.byId("AuthenticateUser").validate();
        if (!valid) {
            return;
        }
        var oscarsStatus = dojo.byId("oscarsStatus");
        oscarsStatus.className = "inprocess";
        oscarsStatus.innerHTML = "Authenticating...";
        dojo.xhrPost({
            url: 'servlet/AuthenticateUser',
            handleAs: "json-comment-filtered",
            load: oscars.Form.handleReply,
            error: oscars.Form.handleError,
            form: dijit.byId("AuthenticateUser").domNode
        });
    }
    function catchEnter(event) {
        if (event.keyCode == dojo.keys.ENTER) {
            postLogin();
            // necessary for Safari
            dojo.stopEvent(event);
        }
    }
    function initSession(event) {
        dojo.connect(dijit.byId("userName").domNode, 'onkeypress', catchEnter);
        dojo.connect(dojo.byId("initialPassword"), 'onkeypress', catchEnter);
    }
    // dojo.addOnLoad doesn't work properly within separate ContentPanes
   dojo.connect(dijit.byId("sessionPane"), "onLoad", initSession);
</script>
</head>
<body>
    <br />
    <div id="loginSection">
    <form id="AuthenticateUser" dojoType="dijit.form.Form"> 
        <table>
          <tr>
            <th>User Name:</th>
            <td class="required"><input dojoType="dijit.form.ValidationTextBox"
                required="true" name="userName"
                id="userName" promptMessage="Enter your login name"
                invalidMessage="Enter your login name" size="28" />
            </td>
          </tr>
          <tr>
            <th>Password:</th>
            <td class="required">
                <input dojoType="dijit.form.ValidationTextBox"
                required="true" type="password" name="initialPassword"
                id="initialPassword"
                promptMessage="Enter your password"
                invalidMessage="You must enter your password"
                size="28" />
            </td>
          </tr>
        </table>
        <button dojoType="dijit.form.Button" id="login">
          LOGIN 
          <script type="dojo/method" event="onClick">
              postLogin();
          </script>
        </button>
    </form>

    <p>Sign in via your OSCARS login and password to access this system.
    To find out about OSCARS and how it works, go to the
    <a href="/OSCARS/docs/" target="_blank">documentation</a>.
    To obtain an account or request more 
    information, email one of the contacts below.</p>
    </div>

    <div id="logoutSection" style="display:none">
    <form id="UserLogout" dojoType="dijit.form.Form"> 
        <button dojoType="dijit.form.Button" id="logout">
          LOGOUT 
          <script type="dojo/method" event="onClick">
              dojo.xhrPost({
                  url: 'servlet/UserLogout',
                  handleAs: "json-comment-filtered",
                  load: oscars.Form.handleReply,
                  error: oscars.Form.handleError,
                  form: dijit.byId("UserLogout").domNode
              });
          </script>
        </button>
    </form>

    <p>You are currently logged in to OSCARS. Return to this tab and click on
    the LOGOUT button to exit.
    </p>
    </div>

    <p>NOTE:  This is the new Web-based interface based on the
    <a href="http://www.dojotoolkit.org/" target="_blank">Dojo</a> toolkit.  Please report any
    problems to the administrators listed at the bottom of this page.
    Do not use the browser's back or forward button while in this
    application.</p>

    <p>Basic OSCARS functionality is as follows:</p>

    <ul>
    <li>
    Clicking on the Reservations tab will bring up a default list of all
    pending and active reservations.  You can modify the reservations listed
    through the input fields at the top.  Clicking on a row will bring up
    a reservation's details.
    </li>
    <li>
    Clicking on the Create Reservation tab will bring up a form to create a
    reservation.
    </li>
    <li>
    Clicking on the Users tab brings up a list of OSCARS users and
    associated information.
    Clicking on a row from that list brings up that user's details.
    You currently need OSCARS admin privileges to view other users' information.
    </li>
    </ul>

    <p>More documentation can be found by clicking on the link at the bottom
    of this page.</p>

</body>
</html>
