<html>
<head>
<script type="text/javascript">
    var resvView = {
      cells: [[
         {name: 'GRI', width: "16em"},
         {name: 'User', width: "18em"},
         {name: 'Start Time', width: "10em"},
         {name: 'End Time', width: "10em"},
         {name: 'Status', width: "34em"}
       ],
       [
         {name: 'Origin', colSpan:"3", width: "44em"},
         {name: 'Destination', colSpan:"2", width: "44em"}
      ]]
    };
    var resvLayout = [ resvView ];
</script>
</head>

<body>

<p>The reservations returned can be constrained by their status, text in
their description, times that they end after or start before, and topology
identifiers that they contain in their path.  Times given are in the
time zone of the browser.  Click on the GRI link to view detailed
information about a reservation.</p>

<form id="reservationListForm" method="POST">

<input type="hidden" name="startTimeSeconds" id="startTimeSeconds" />
<input type="hidden" name="endTimeSeconds" id="endTimeSeconds" />

<table>
<tr>
  <td width="14%">
  <button dojoType="dijit.form.Button" id="refreshReservationList">
     Refresh 
     <script type="dojo/method" event="onClick">
        var oscarsStatus = dojo.byId("oscarsStatus");
        oscarsStatus.className = "inprocess";
        oscarsStatus.innerHTML = "Retrieving reservations...";
        oscars.Form.convertSearchTimes();
        dojo.xhrPost({
            url: 'servlet/ListReservations',
            handleAs: "json-comment-filtered",
            load: oscars.Form.handleReply,
            error: oscars.Form.handleError,
            form: dojo.byId("reservationListForm")
        });
    </script>
  </button>
  </td>

  <td width="10%">Statuses:
  <select name="statuses" multiple="true" size="3">
      <option value="ACTIVE" selected="selected">ACTIVE</option>
      <option value="PENDING" selected="selected">PENDING</option>
      <option value="FINISHED">FINISHED</option>
      <option value="CANCELLED">CANCELLED</option>
      <option value="FAILED">FAILED</option>
      <option value="INVALIDATED">INVALIDATED</option>
  </select>
  </td>

  <td width="12%">Ending after:
    <input dojoType="dijit.form.DateTextBox" name="startDateSearch"
               id="startDateSearch" />MM/DD/YYYY</td>

  <td width="9%">Time:
    <input dojoType="dijit.form.ValidationTextBox" name="startTimeSearch"
             id="startTimeSearch"
             regExp="[0-2]?[\d]:[0-5][\d]"
             promptMessage="Enter the time portion of the date in format HH:MM"
             invalidMessage="Invalid format:  use HH:MM" />HH:MM</td>

  <td width="12%">Starting before:
    <input dojoType="dijit.form.DateTextBox" name="endDateSearch"
               id="endDateSearch" />MM/DD/YYYY</td>

  <td width="9%">Time:
    <input dojoType="dijit.form.ValidationTextBox" name="endTimeSearch"
             id="endTimeSearch"
             regExp="[0-2]?[\d]:[0-5][\d]"
             promptMessage="Enter the time portion of the date in format HH:MM"
             invalidMessage="Invalid format:  use HH:MM" width="10em" />HH:MM</td>
  <td>
    <input type="reset" value="Reset fields" />
  </td>

</tr>
<tr>
  <td colspan="6">Link ids:
      <textarea name="linkIds" id="linkIds" dojoType="dijit.form.Textarea">
    </textarea>Widget will expand vertically
  </td>

  <td>Description:
  <input name="resvDescription" id="resvDescription"
       dojoType="dijit.form.TextBox"
       promptMessage="Search by reservation description" />
  </td>

</tr>
</table>
</form>

<br/>

<div id="resvGrid" dojoType="dojox.Grid" structure="resvLayout">
</div>

</body>
</html>
