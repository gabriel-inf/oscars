<html>
<head>
<script type="text/javascript">
    var resvView = {
      cells: [[
         {name: 'GRI', width: "13em"},
         {name: 'Status', width: "6em"},
         {name: 'Bandwidth', width: "7em"},
         {name: 'Start Time', width: "10em"},
         {name: 'Source', width: "27"},
         {name: 'Local source', width: "27"}
       ],
       [
         {name: 'User', colSpan:"2", width: "19em"},
         {name: 'VLAN', width: "7em"},
         {name: 'End Time', width: "10em"},
         {name: 'Destination', width: "27"},
         {name: 'Local destination', width: "27"}
      ]]
    };
    var resvLayout = [ resvView ];
</script>
<script type="text/javascript">
    function catchSearch(event) {
        if (event.keyCode == dojo.keys.ENTER) {
            oscars.Reservations.postSearch();
            dojo.stopEvent(event);
        }
    }
    function initSearch() {
        dojo.connect(dijit.byId("vlanSearch").domNode, 'onkeypress',
                     catchSearch);
        dojo.connect(dijit.byId("linkIds").domNode, 'onkeypress', catchSearch);
        dojo.connect(dijit.byId("resvDescription").domNode, 'onkeypress',
                     catchSearch);
    }
    dojo.connect(dijit.byId("reservationsPane"), "onLoad", initSearch);
</script>
</head>

<body>

<p>The reservations returned by a search can be constrained by their status,
text in their description, times that they end after or start before, and
topology identifiers that they contain in their path.  Times given are in the
time zone of the browser.  Click on a row to view detailed
information about a reservation.  Click on SEARCH again to get the latest
information on the reservations chosen.</p>

<form id="reservationsForm" dojoType="dijit.form.Form"> 

<input type="hidden" name="startTimeSeconds" id="startTimeSeconds" />
<input type="hidden" name="endTimeSeconds" id="endTimeSeconds" />

<table>
<tr>
  <td width="7%">
  <button dojoType="dijit.form.Button" id="refreshReservationList">
     SEARCH
     <script type="dojo/method" event="onClick">
         oscars.Reservations.postSearch();
    </script>
  </button>
  </td>

  <td width="10%">Statuses:
  <select name="statuses" multiple="true" size="3">
      <option value="ACTIVE" selected="selected">ACTIVE</option>
      <option value="PENDING" selected="selected">PENDING</option>
      <option value="FINISHED">FINISHED</option>
      <option value="CANCELLED">CANCELLED</option>
      <option value="FAILED">FAILED</option>
      <option value="INVALIDATED">INVALIDATED</option>
  </select>
  </td>

  <td width="9%">VLAN:
    <input dojoType="dijit.form.ValidationTextBox" name="vlanSearch"
             id="vlanSearch"
             promptMessage="Enter space separated tag(s) and/or ranges, e.g. 3000 3500-3600">Number and/or range
  </td>

  <td width="12%">Ending after:
    <input dojoType="dijit.form.DateTextBox" name="startDateSearch"
               id="startDateSearch" />MM/DD/YYYY</td>

  <td width="9%">Time:
    <input dojoType="dijit.form.ValidationTextBox" name="startTimeSearch"
             id="startTimeSearch"
             regExp="[0-2]?[\d]:[0-5][\d]"
             promptMessage="Enter the time portion of the date in format HH:MM"
             invalidMessage="Invalid format:  use HH:MM" />HH:MM</td>

  <td width="12%">Starting before:
    <input dojoType="dijit.form.DateTextBox" name="endDateSearch"
               id="endDateSearch" />MM/DD/YYYY</td>

  <td width="9%">Time:
    <input dojoType="dijit.form.ValidationTextBox" name="endTimeSearch"
             id="endTimeSearch"
             regExp="[0-2]?[\d]:[0-5][\d]"
             promptMessage="Enter the time portion of the date in format HH:MM"
             invalidMessage="Invalid format:  use HH:MM" width="10em" />HH:MM</td>
  <td>
    <input type="reset" value="Reset fields" />
  </td>

</tr>
<tr>
  <td colspan="6">Link ids:
      <textarea name="linkIds" id="linkIds" dojoType="dijit.form.Textarea">
    </textarea>Widget will expand vertically
  </td>

  <td>Description:
  <input name="resvDescription" id="resvDescription"
       dojoType="dijit.form.TextBox"
       promptMessage="Search by reservation description" />
  </td>

</tr>
</table>
</form>

<br/>

<div id="resvGrid" dojoType="dojox.Grid" structure="resvLayout">
</div>

</body>
</html>
